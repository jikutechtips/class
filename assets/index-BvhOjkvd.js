import{r,u as v,j as e,ap as p,aq as g,ar as b,as as I,at as y,au as C,av as f,aw as E,ax as N,ay as O,az as P,aA as A,aB as L,aC as R}from"./vendor-BrzHSOkp.js";import{S as T,u as D,C as M}from"./page-chooseclass-DTnmbXy4.js";import{D as B}from"./page-index-DTFXUX1f.js";import{D as w}from"./page-homep-BKNo7gOV.js";import{A as U}from"./page-admin-aLmLgASw.js";import"./page-dashboard-BsZqo3A7.js";import"./page-articles-DZ1-fFDs.js";import"./page-videos-C-ma1VMj.js";import"./page-audio-C-64Er3N.js";import"./page-LoginDialog-jwQZOgE4.js";import"./page-sign-in-side/SignInSide-DVzk_-sl.js";import"./page-shared-theme/AppTheme-CjX0rGq9.js";import"./page-shared-theme/customizations/inputs-t9nlsiu_.js";import"./page-shared-theme/themePrimitives-CT1bccfn.js";import"./page-shared-theme/customizations/dataDisplay-Hwz5sXT0.js";import"./page-shared-theme/customizations/feedback-B4qLoVSN.js";import"./page-shared-theme/customizations/navigation-CPvq1DhY.js";import"./page-shared-theme/customizations/surfaces-D_xvK1fu.js";import"./page-RegisterDialog-Br2EuKbe.js";import"./page-addarticle-LRTbpErP.js";import"./page-viewusers-CEwX_vrk.js";import"./page-paymentInfo-DfrR-wuP.js";import"./page-viewarticles-BHihHoUl.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();const k={title:"",logo:e.jsx("img",{src:"https://c.mamed.org/images/jikulogo",alt:"App Logo",className:"w-10 h-10 rounded-full",onError:o=>{o.currentTarget.src="https://placehold.co/40x40/cccccc/000000?text=ERR"}})},_=60*60*1e3;function q(){const[o,n]=r.useState(null),[a,l]=r.useState(!0),t=v(),[s,c]=r.useState(null),m=r.useCallback(i=>{n(i),i?localStorage.setItem("session",JSON.stringify(i)):localStorage.removeItem("session")},[]),d=r.useCallback(()=>{if(s&&clearTimeout(s),o){const i=setTimeout(()=>{m(null),t("/sign-in")},_);c(i)}},[o,t,m]);r.useEffect(()=>{const i=localStorage.getItem("session");if(i)try{const u=JSON.parse(i);n(u)}catch(u){console.error("Error parsing session from localStorage",u),localStorage.removeItem("session")}l(!1)},[]),r.useEffect(()=>{d()},[d]);const h=r.useCallback(()=>{t("/sign-in")},[t]),x=r.useCallback(()=>{n(null),localStorage.removeItem("session"),t("/sign-in"),s&&clearTimeout(s)},[t,s]),j=r.useMemo(()=>({session:o,setSession:m}),[o,m]),S=r.useMemo(()=>{const i=[{title:"Dashboard",icon:e.jsx(p,{sx:{color:"green"}}),visible:!0},{title:"Choose Class",icon:e.jsx(g,{sx:{color:"green"}}),segment:"chooseclass",visible:!0}];if(o&&o.user){if(o.user.email==="alex@gmail.com")return[{title:"Dashboard",icon:e.jsx(p,{sx:{color:"green"}}),visible:!0},{title:"Choose Class",icon:e.jsx(g,{sx:{color:"green"}}),segment:"chooseclass",visible:!0},{title:"Admin",icon:e.jsx(b,{sx:{color:"green"}}),segment:"admin"}];o.user.email}return i},[o]);return a?e.jsx(I,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(y,{size:"lg",style:{color:"#676767",width:"80px",height:"80px"}})}):e.jsx(T.Provider,{value:j,children:e.jsx(C,{navigation:[{kind:"header",title:"Main items"},...S],branding:k,session:o,authentication:{signIn:h,signOut:x},children:e.jsx(f,{})})})}function z(){const{session:o}=D(),n=E();if(!o){const a=`/sign-in?callbackUrl=${encodeURIComponent(n.pathname)}`;return e.jsx(N,{to:a,replace:!0})}return e.jsx(e.Fragment,{children:e.jsx(O,{children:e.jsx(P,{children:e.jsx(f,{})})})})}const F="class",G=A([{path:"/",element:e.jsx(q,{}),children:[{path:"/",element:e.jsx(z,{}),children:[{path:"/",element:e.jsx(B,{})},{path:"/chooseclass",element:e.jsx(M,{})},{path:"/admin",element:e.jsx(U,{})}]},{path:"/sign-in",element:e.jsx(w,{})}]}],{basename:`/${F}`});L(document.getElementById("root")).render(e.jsxs(r.StrictMode,{children:[e.jsx(R,{router:G})," "]}));
