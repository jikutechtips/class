import{R as v,r as t,j as e,g as c,o as l,U as b,z as C,H as k,S as A,B as x,c as S}from"./vendor-BrzHSOkp.js";import{A as i}from"./page-articles-DZ1-fFDs.js";import{V as E}from"./page-videos-C-ma1VMj.js";import{A as T}from"./page-audio-C-64Er3N.js";import{u as B}from"./page-chooseclass-Dq1AN_te.js";const $=({stageName:r})=>{v(),new URLSearchParams(window.location.search);const[p,f]=t.useState("transparent"),{session:D}=B(),g="https://jikuclass.onrender.com",[a,j]=t.useState([]),[d,y]=t.useState(!0),[h,w]=t.useState(null),[s,n]=t.useState(e.jsx(i,{articles:[]}));return t.useEffect(()=>{(async()=>{try{const o=await fetch(`${g}/api/articles/type/${r??"utangulizi"}`);if(!o.ok)throw new Error(`${o.status}`);const m=await o.json();j(m),n(e.jsx(i,{articles:m}))}catch(o){w(o.message==404?"No Data ":`Error ${o.message} contact Admin`),console.error("Error fetching articles:",o.message)}finally{y(!1)}})();const u=()=>{window.scrollY>50?f(S[900]):f("transparent")};return window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),t.useEffect(()=>{!d&&a.length>0&&s&&s.type===i&&s.props.articles.length===0&&n(e.jsx(i,{articles:a}))},[a,d,s]),d?e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[e.jsx(l,{variant:"h5",children:"Inapakia Makala..."})," "]}):h?e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",color:"red"},children:[e.jsxs(l,{variant:"h5",children:[" ",h]})," "]}):e.jsxs(c,{sx:{width:"100%",minHeight:"100vh",background:"transparent",display:"flex",flexDirection:"column"},children:[e.jsx(b,{}),e.jsx(C,{position:"fixed",elevation:0,sx:{background:p,color:"#fff",boxShadow:p==="transparent"?"none":"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"background-color 0.3s ease",top:0,left:0,width:"100%",zIndex:1e3},children:e.jsxs(k,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#fff"},children:r?`${r}`:"Stage"})," ",e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#fff"},children:"Username"})]})}),e.jsxs(c,{sx:{marginTop:"64px",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",paddingX:{xs:2,sm:4,md:8},paddingTop:4,paddingBottom:8},children:[e.jsxs(A,{direction:"row",spacing:3,sx:{display:{xs:"flex",md:"flex",color:"black"}},children:[e.jsx(x,{variant:"contained",color:"inherit",onClick:()=>{n(e.jsx(i,{articles:a}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Makala"}),e.jsx(x,{variant:"contained",color:"inherit",onClick:()=>{n(e.jsx(E,{defaultVideoType:r==null?void 0:r.toLowerCase()}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Video za Vitendo"})," ",e.jsx(x,{variant:"contained",color:"inherit",onClick:()=>{n(e.jsx(T,{defaultAudioType:r==null?void 0:r.toLowerCase()}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Masomo ya Sauti"})]})," ",s]})]})};export{$ as D};
