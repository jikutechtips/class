import{U as S,r as s,j as e,h as c,p as l,X as k,H as A,J as E,S as T,B as p,c as B}from"./vendor-DzAsgXT6.js";import{A as n}from"./page-articles-DmsJEowJ.js";import{V as D}from"./page-videos-CNFNjB_L.js";import{A as I}from"./page-audio-iDfRntJ3.js";import{u as L}from"./page-chooseclass-BHN9MkVD.js";const z=()=>{S();const d=new URLSearchParams(window.location.search),[f,h]=s.useState("transparent"),{session:P}=L(),y="http://localhost:8080",[i,w]=s.useState([]),[x,v]=s.useState(!0),[u,b]=s.useState(null),[t,C]=s.useState(""),[o,a]=s.useState(e.jsx(n,{articles:[]}));return s.useEffect(()=>{(async()=>{try{const r=await fetch(`${y}/api/articles/type/${d.get("stage")!=null?d.get("stage"):"utangulizi"}`);if(!r.ok)throw new Error(`${r.status}`);const j=await r.json();w(j),a(e.jsx(n,{articles:j}))}catch(r){b(r.message==404?"No Data ":`Error ${r.message} contact Admin`),console.error("Error fetching articles:",r.message)}finally{v(!1)}})();const g=()=>{window.scrollY>50?h(B[900]):h("transparent")};window.addEventListener("scroll",g);const m=d.get("stage");return m&&C(m),()=>{window.removeEventListener("scroll",g)}},[]),s.useEffect(()=>{!x&&i.length>0&&o&&o.type===n&&o.props.articles.length===0&&a(e.jsx(n,{articles:i}))},[i,x,o]),x?e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[e.jsx(l,{variant:"h5",children:"Inapakia Makala..."})," "]}):u?e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",color:"red"},children:[e.jsxs(l,{variant:"h5",children:[" ",u]})," "]}):e.jsxs(c,{sx:{width:"100%",minHeight:"100vh",background:"transparent",display:"flex",flexDirection:"column"},children:[e.jsx(k,{}),e.jsx(A,{position:"fixed",elevation:0,sx:{background:f,color:"#fff",boxShadow:f==="transparent"?"none":"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"background-color 0.3s ease",top:0,left:0,width:"100%",zIndex:1e3},children:e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#fff"},children:t?`${t}`:"Stage"})," ",e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#fff"},children:"Username"})]})}),e.jsxs(c,{sx:{marginTop:"64px",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",paddingX:{xs:2,sm:4,md:8},paddingTop:4,paddingBottom:8},children:[e.jsxs(T,{direction:"row",spacing:3,sx:{display:{xs:"flex",md:"flex",color:"black"}},children:[e.jsx(p,{variant:"contained",color:"inherit",onClick:()=>{a(e.jsx(n,{articles:i}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Makala"}),e.jsx(p,{variant:"contained",color:"inherit",onClick:()=>{a(e.jsx(D,{defaultVideoType:t==null?void 0:t.toLowerCase()}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Video za Vitendo"})," ",e.jsx(p,{variant:"contained",color:"inherit",onClick:()=>{a(e.jsx(I,{defaultAudioType:t==null?void 0:t.toLowerCase()}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Masomo ya Sauti"})]})," ",o]})]})};export{z as D};
