import{R as w,r as s,j as e,g as c,o as f,U as v,S as C,B as d,c as k}from"./vendor-BrzHSOkp.js";import{A as i}from"./page-articles-DZ1-fFDs.js";import{V as A}from"./page-videos-C-ma1VMj.js";import{A as b}from"./page-audio-C-64Er3N.js";import{u as S}from"./page-chooseclass-DTnmbXy4.js";const V=({stageName:r})=>{w(),new URLSearchParams(window.location.search);const[E,p]=s.useState("transparent"),{session:T}=S(),m="https://jikuclass.onrender.com",[a,g]=s.useState([]),[l,j]=s.useState(!0),[x,y]=s.useState(null),[t,n]=s.useState(e.jsx(i,{articles:[]}));return s.useEffect(()=>{(async()=>{try{const o=await fetch(`${m}/api/articles/type/${r??"utangulizi"}`);if(!o.ok)throw new Error(`${o.status}`);const h=await o.json();g(h),n(e.jsx(i,{articles:h}))}catch(o){y(o.message==404?"No Data ":`Error ${o.message} contact Admin`),console.error("Error fetching articles:",o.message)}finally{j(!1)}})();const u=()=>{window.scrollY>50?p(k[900]):p("transparent")};return window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),s.useEffect(()=>{!l&&a.length>0&&t&&t.type===i&&t.props.articles.length===0&&n(e.jsx(i,{articles:a}))},[a,l,t]),l?e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[e.jsx(f,{variant:"h5",children:"Inapakia Makala..."})," "]}):x?e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",color:"red"},children:[e.jsxs(f,{variant:"h5",children:[" ",x]})," "]}):e.jsxs(c,{sx:{width:"100%",minHeight:"100vh",background:"transparent",display:"flex",flexDirection:"column"},children:[e.jsx(v,{}),e.jsxs(c,{sx:{marginTop:"64px",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",paddingX:{xs:2,sm:4,md:8},paddingTop:4,paddingBottom:8},children:[e.jsxs(C,{direction:"row",spacing:3,sx:{display:{xs:"flex",md:"flex",color:"black"}},children:[e.jsx(d,{variant:"contained",color:"inherit",onClick:()=>{n(e.jsx(i,{articles:a}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Makala"}),e.jsx(d,{variant:"contained",color:"inherit",onClick:()=>{n(e.jsx(A,{defaultVideoType:r==null?void 0:r.toLowerCase()}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Video za Vitendo"})," ",e.jsx(d,{variant:"contained",color:"inherit",onClick:()=>{n(e.jsx(b,{defaultAudioType:r==null?void 0:r.toLowerCase()}))},sx:{borderRadius:"0",padding:"0.5rem 1rem",fontWeight:500,textTransform:"uppercase",color:"success","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",textDecoration:"none"}},children:"Masomo ya Sauti"})]})," ",t]})]})};export{V as D};
