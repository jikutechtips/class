import{r,u as b,j as e,ar as p,as as g,at as v,au as y,av as C,aw as I,ax as f,ay as P,az as D,aA as E,aB as N,aC as O,aD as A,aE as L}from"./vendor-DzAsgXT6.js";import{S as R,u as T,C as M}from"./page-chooseclass-BHN9MkVD.js";import{D as B}from"./page-index-lXd0v56r.js";import{D as w}from"./page-homep-CX-TtI_v.js";import{D as k}from"./page-dashboard-Cd-ylIhl.js";import{A as U}from"./page-admin-iK0msUqv.js";import"./page-LoginDialog-C33OgvRc.js";import"./page-sign-in-side/SignInSide-f_9Z_zY8.js";import"./page-shared-theme/AppTheme-iYoXRAvp.js";import"./page-shared-theme/customizations/inputs-BVbOGBbC.js";import"./page-shared-theme/themePrimitives-ZM3a8fvJ.js";import"./page-shared-theme/customizations/dataDisplay-BLkCsIek.js";import"./page-shared-theme/customizations/feedback-NxFJM-_9.js";import"./page-shared-theme/customizations/navigation-EKtKVIxw.js";import"./page-shared-theme/customizations/surfaces-CxTEeuJZ.js";import"./page-RegisterDialog-CoyT9MM3.js";import"./page-articles-DmsJEowJ.js";import"./page-videos-CNFNjB_L.js";import"./page-audio-iDfRntJ3.js";import"./page-addarticle-BwhTC4QT.js";import"./page-viewusers-D4bnnu-7.js";import"./page-paymentInfo-0IUHcEdA.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();const z={title:"",logo:e.jsx("img",{src:"https://c.mamed.org/images/jikulogo",alt:"App Logo",className:"w-10 h-10 rounded-full",onError:o=>{o.currentTarget.src="https://placehold.co/40x40/cccccc/000000?text=ERR"}})},F=60*60*1e3;function J(){const[o,n]=r.useState(null),[a,l]=r.useState(!0),t=b(),[s,c]=r.useState(null),m=r.useCallback(i=>{n(i),i?localStorage.setItem("session",JSON.stringify(i)):localStorage.removeItem("session")},[]),d=r.useCallback(()=>{if(s&&clearTimeout(s),o){const i=setTimeout(()=>{m(null),t("/sign-in")},F);c(i)}},[o,t,m]);r.useEffect(()=>{const i=localStorage.getItem("session");if(i)try{const u=JSON.parse(i);n(u)}catch(u){console.error("Error parsing session from localStorage",u),localStorage.removeItem("session")}l(!1)},[]),r.useEffect(()=>{d()},[d]);const h=r.useCallback(()=>{t("/sign-in")},[t]),x=r.useCallback(()=>{n(null),localStorage.removeItem("session"),t("/sign-in"),s&&clearTimeout(s)},[t,s]),j=r.useMemo(()=>({session:o,setSession:m}),[o,m]),S=r.useMemo(()=>{const i=[{title:"Dashboard",icon:e.jsx(p,{sx:{color:"green"}}),visible:!0},{title:"Choose Class",icon:e.jsx(g,{sx:{color:"green"}}),segment:"chooseclass",visible:!0}];if(o&&o.user){if(o.user.email==="alex@gmail.com")return[{title:"Dashboard",icon:e.jsx(p,{sx:{color:"green"}}),visible:!0},{title:"Choose Class",icon:e.jsx(g,{sx:{color:"green"}}),segment:"chooseclass",visible:!0},{title:"Admin",icon:e.jsx(v,{sx:{color:"green"}}),segment:"admin"}];o.user.email}return i},[o]);return a?e.jsx(y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(C,{size:"lg",style:{color:"#676767",width:"80px",height:"80px"}})}):e.jsx(R.Provider,{value:j,children:e.jsx(I,{navigation:[{kind:"header",title:"Main items"},...S],branding:z,session:o,authentication:{signIn:h,signOut:x},children:e.jsx(f,{})})})}function q(){const{session:o}=T(),n=P();if(!o){const a=`/sign-in?callbackUrl=${encodeURIComponent(n.pathname)}`;return e.jsx(D,{to:a,replace:!0})}return e.jsx(e.Fragment,{children:e.jsx(E,{children:e.jsx(N,{children:e.jsx(f,{})})})})}const G=O([{path:"/",element:e.jsx(J,{}),children:[{path:"/",element:e.jsx(q,{}),children:[{path:"/",element:e.jsx(B,{})},{path:"/chooseclass",element:e.jsx(M,{})},{path:"/dashboard",element:e.jsx(k,{})},{path:"/admin",element:e.jsx(U,{})}]},{path:"/sign-in",element:e.jsx(w,{})}]}]);A(document.getElementById("root")).render(e.jsxs(r.StrictMode,{children:[e.jsx(L,{router:G})," "]}));
