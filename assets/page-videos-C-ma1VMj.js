import{r as n,v as j,w as D,j as e,y as p,o as a,x as I,G as y,D as R,z as V,H as E,I as b,C as f,a as A,c as F,b as L,g as x,B as M,d as P,e as H}from"./vendor-BrzHSOkp.js";const O=({video:i,onReadMore:r})=>{const t=j();return e.jsx(P,{onClick:()=>r(i),sx:{backgroundColor:t.palette.background.paper,borderRadius:t.spacing(2),boxShadow:t.shadows[5],transition:"transform 0.3s ease-in-out","&:hover":{transform:"scale(1.02)"},cursor:"pointer"},children:e.jsxs(H,{sx:{padding:t.spacing(3),"&:last-child":{paddingBottom:t.spacing(3)}},children:[e.jsx(a,{variant:"caption",sx:{fontSize:t.typography.caption.fontSize,color:t.palette.primary.main,fontWeight:t.typography.fontWeightMedium,textTransform:"uppercase",marginBottom:t.spacing(.5)},children:i.type}),e.jsx(a,{variant:"h5",sx:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightBold,color:t.palette.text.primary,marginBottom:t.spacing(1),overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:i.title}),e.jsx(x,{sx:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",marginBottom:"16px",overflow:"hidden",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"center","& img":{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}},children:e.jsx("img",{src:"https://c.mamed.org/images/code.png",alt:i.title})}),e.jsx(a,{variant:"body1",sx:{fontSize:t.typography.body1.fontSize,color:t.palette.text.secondary,lineHeight:1.6,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i.description}),e.jsx(a,{variant:"caption",sx:{fontSize:t.typography.caption.fontSize,color:t.palette.text.primary},children:i.uploadTime})]})})},$=({defaultVideoType:i})=>{const[r,t]=n.useState(null),[k,h]=n.useState(!1),[v,C]=n.useState(!0),[g,w]=n.useState(null),S="https://c.mamed.org/rent/get_videos.php",[m,U]=n.useState(i||"utangulizi"),[B,z]=n.useState([]),o=j(),W=s=>{t(s),h(!0)},c=()=>{h(!1),t(null)},d=D(o.breakpoints.down("sm"));n.useEffect(()=>{(async()=>{try{const l=await fetch(S);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const T=await l.json();z(T)}catch(l){console.error("Failed to fetch video data:",l),w(`Failed to load video data: ${l.message}`)}finally{C(!1)}})()},[]);const u=B.filter(s=>s.type===m);return v?e.jsx(p,{maxWidth:"lg",sx:{mt:8,mb:8,textAlign:"center"},children:e.jsx(a,{variant:"h6",children:"Loading videos..."})}):g?e.jsx(p,{maxWidth:"lg",sx:{mt:8,mb:8,textAlign:"center",color:"error.main"},children:e.jsxs(a,{variant:"h6",children:["Error: ",g]})}):e.jsx(I,{theme:o,children:e.jsxs(p,{maxWidth:"lg",sx:{mt:2,mb:2},children:[u.length===0&&e.jsxs(a,{variant:"body1",sx:{textAlign:"center",color:o.palette.text.secondary},children:['Hakuna video za aina ya "',m,'" zilizopatikana.']}),e.jsx(y,{container:!0,spacing:4,children:u.map(s=>e.jsx(y,{item:!0,xs:12,sm:6,md:4,children:e.jsx(O,{video:s,onReadMore:W})},s.id))}),e.jsx(R,{open:k,onClose:c,fullScreen:d,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:d?2:"12px",backgroundColor:o.palette.background.default}},children:r&&e.jsxs(e.Fragment,{children:[d?e.jsx(V,{sx:{position:"relative",backgroundColor:o.palette.background.paper},children:e.jsxs(E,{children:[e.jsx(b,{edge:"start",color:"success",onClick:c,"aria-label":"close",children:e.jsx(f,{})}),e.jsx(a,{variant:"h6",sx:{ml:2,flex:1,color:o.palette.text.primary},children:r.title})]})}):e.jsxs(A,{sx:{backgroundColor:o.palette.background.paper,color:o.palette.text.primary,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${o.palette.divider}`},children:[r.title,e.jsx(b,{onClick:c,sx:{color:F[900]},children:e.jsx(f,{})})]}),e.jsxs(L,{sx:{p:d?2:4,backgroundColor:o.palette.background.default},children:[e.jsx(x,{sx:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",marginBottom:"16px",overflow:"hidden",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)","& iframe":{position:"absolute",top:0,left:0,width:"100%",height:"100%"},display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("iframe",{src:r.videoUrl,title:r.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}),e.jsxs(a,{variant:"body2",sx:{display:"block",color:o.palette.text.secondary,mb:1},children:["Type:"," ",e.jsx("span",{style:{color:o.palette.primary.main},children:r.type})]}),e.jsx(a,{variant:"body1",sx:{whiteSpace:"pre-line",color:o.palette.text.primary,mb:1},children:r.description}),e.jsxs(a,{variant:"caption",sx:{display:"block",color:o.palette.text.secondary},children:["Uploaded: ",r.uploadTime]}),!d&&e.jsx(x,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsx(M,{onClick:c,variant:"contained",sx:{color:"success","&:hover":{backgroundColor:o.palette.primary.dark}},children:"Close"})})]})]})})]})})};export{$ as V};
