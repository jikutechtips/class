import{r,u as b,j as e,ar as p,as as g,at as v,au as I,av as y,aw as C,ax as f,ay as E,az as P,aA as N,aB as O,aC as A,aD as D,aE as L}from"./vendor-COX_TtbI.js";import{S as R,u as T,C as M}from"./page-chooseclass-PDuunqKd.js";import{D as B}from"./page-index-BbfKm8lh.js";import{D as w}from"./page-homep-BI7f6scG.js";import{D as U}from"./page-dashboard-9vyAVUYz.js";import{A as k}from"./page-admin-B29ork9_.js";import"./page-LoginDialog-vj63FqGf.js";import"./page-sign-in-side/SignInSide-BtbZHBwp.js";import"./page-shared-theme/AppTheme-BJuLRluO.js";import"./page-shared-theme/customizations/inputs-B3WAPNms.js";import"./page-shared-theme/themePrimitives-BUfFabKV.js";import"./page-shared-theme/customizations/dataDisplay-CQD4RE-4.js";import"./page-shared-theme/customizations/feedback-Bz2t6UA4.js";import"./page-shared-theme/customizations/navigation-BxlHErjj.js";import"./page-shared-theme/customizations/surfaces-cTq1Z8m_.js";import"./page-RegisterDialog-DFAMabPP.js";import"./page-articles-BWnDJU98.js";import"./page-videos-j_p4omk7.js";import"./page-audio-DX3DIw5y.js";import"./page-addarticle-ahVrt9rw.js";import"./page-viewusers-jM0oIF-i.js";import"./page-paymentInfo-Dlk-7Rzb.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const _={title:"",logo:e.jsx("img",{src:"https://c.mamed.org/images/jikulogo",alt:"App Logo",className:"w-10 h-10 rounded-full",onError:o=>{o.currentTarget.src="https://placehold.co/40x40/cccccc/000000?text=ERR"}})},z=60*60*1e3;function F(){const[o,a]=r.useState(null),[n,l]=r.useState(!0),t=b(),[s,c]=r.useState(null),m=r.useCallback(i=>{a(i),i?localStorage.setItem("session",JSON.stringify(i)):localStorage.removeItem("session")},[]),d=r.useCallback(()=>{if(s&&clearTimeout(s),o){const i=setTimeout(()=>{m(null),t("/sign-in")},z);c(i)}},[o,t,m]);r.useEffect(()=>{const i=localStorage.getItem("session");if(i)try{const u=JSON.parse(i);a(u)}catch(u){console.error("Error parsing session from localStorage",u),localStorage.removeItem("session")}l(!1)},[]),r.useEffect(()=>{d()},[d]);const h=r.useCallback(()=>{t("/sign-in")},[t]),x=r.useCallback(()=>{a(null),localStorage.removeItem("session"),t("/sign-in"),s&&clearTimeout(s)},[t,s]),j=r.useMemo(()=>({session:o,setSession:m}),[o,m]),S=r.useMemo(()=>{const i=[{title:"Dashboard",icon:e.jsx(p,{sx:{color:"green"}}),visible:!0},{title:"Choose Class",icon:e.jsx(g,{sx:{color:"green"}}),segment:"chooseclass",visible:!0}];if(o&&o.user){if(o.user.email==="alex@gmail.com")return[{title:"Dashboard",icon:e.jsx(p,{sx:{color:"green"}}),visible:!0},{title:"Choose Class",icon:e.jsx(g,{sx:{color:"green"}}),segment:"chooseclass",visible:!0},{title:"Admin",icon:e.jsx(v,{sx:{color:"green"}}),segment:"admin"}];o.user.email}return i},[o]);return n?e.jsx(I,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(y,{size:"lg",style:{color:"#676767",width:"80px",height:"80px"}})}):e.jsx(R.Provider,{value:j,children:e.jsx(C,{navigation:[{kind:"header",title:"Main items"},...S],branding:_,session:o,authentication:{signIn:h,signOut:x},children:e.jsx(f,{})})})}function G(){const{session:o}=T(),a=E();if(!o){const n=`/sign-in?callbackUrl=${encodeURIComponent(a.pathname)}`;return e.jsx(P,{to:n,replace:!0})}return e.jsx(e.Fragment,{children:e.jsx(N,{children:e.jsx(O,{children:e.jsx(f,{})})})})}const J="class",$=A([{path:"/",element:e.jsx(F,{}),children:[{path:"/",element:e.jsx(G,{}),children:[{path:"/",element:e.jsx(B,{})},{path:"/chooseclass",element:e.jsx(M,{})},{path:"/dashboard",element:e.jsx(U,{})},{path:"/admin",element:e.jsx(k,{})}]},{path:"/sign-in",element:e.jsx(w,{})}]}],{basename:`/${J}`});D(document.getElementById("root")).render(e.jsxs(r.StrictMode,{children:[e.jsx(L,{router:$})," "]}));
