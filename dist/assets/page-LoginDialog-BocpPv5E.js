import{r as c,u as g,j as s,D as m,a as d,I as h,C as x,b as p,S as f}from"./vendor-Q_I1QV0S.js";const E=c.createContext({session:{},setSession:()=>{}});function S(){return c.useContext(E)}const a="https://dental-clinic-latest.onrender.com",y=async r=>new Promise((n,t)=>{fetch(`${a}/users/${r.get("email")}`,{method:"GET"}).then(async e=>e.ok?e.json():fetch(`${a}/clients/-/${r.get("email")}`,{method:"GET"})).then(e=>{e&&e.fullName?r.get("password")===e.password?n({user:{name:e.fullName,email:r.get("email")||"",image:"https://mamed.org/vite.svg",title:e.title,entity_name:e.entity_name}}):t(new Error("Incorrect credentials.")):t(new Error("User not found."))}).catch(e=>{console.error("Error fetching user data:",e),t(new Error("An error occurred during login."))})}),w=({open:r,onClose:n})=>{const{setSession:t}=S(),e=g();return s.jsxs(m,{open:r,onClose:n,fullWidth:!0,maxWidth:"sm",children:[s.jsxs(d,{children:["Login",s.jsx(h,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:i=>i.palette.grey[500]},children:s.jsx(x,{})})]}),s.jsx(p,{children:s.jsx(f,{providers:[{id:"credentials",name:"Credentials"}],signIn:async(i,l,u)=>{try{const o=await y(l);if(o)return t(o),e(u||"/",{replace:!0}),n(),{}}catch(o){return{error:o instanceof Error?o.message:"An error occurred"}}return{}}})})]})};export{w as L,E as S,S as u};
