import{r as a,m as _,j as t,G as D,H as x,g as K,A as L,B as U,T as M,d as n,e as Y,f as V}from"./vendor-Q_I1QV0S.js";import{A as J}from"./page-add-client-CrBgJr_R.js";import{C as $}from"./page-sign-in-side/Content-DhKiev2G.js";import{H as G}from"./page-Header-BRQicIna.js";function ae(N){const p="https://dental-clinic-latest.onrender.com",[i,g]=a.useState(""),[o,f]=a.useState(""),[l,v]=a.useState(""),[c,C]=a.useState(""),[d,j]=a.useState(""),[y,S]=a.useState(""),[u,E]=a.useState(""),[m,b]=a.useState(""),[h,w]=a.useState(""),[q,B]=a.useState(""),[A,P]=a.useState(""),[O,T]=a.useState(!1),[F,r]=a.useState(""),[Q,W]=a.useState(!1),[H,z]=a.useState(!1),k=(e,s)=>{s!=="clickaway"&&T(!1)},I=_().tz("Africa/Nairobi").format("YYYY-MM-DDTHH:mm:ss"),R=async()=>{if(i==""&&c==""&&d==""&&h==""&&m==""){r("Some of field not filled,  Please fill all field to Continue...");return}if(o.length<12){r("Make Sure Address in Clinic Information is in Proper Format,i.e  P.o Box 123, Moshi , Kilimanjaro");return}if(l.length<11){r("Phone Number in Clinic Information must have Country Code i.e 255 for Tanzania");return}if(o.length<12){r("Make Sure Address in Administration Information is in Proper Format,i.e  P.o Box 123, Moshi , Kilimanjaro");return}if(u.length<11){r("Phone number  in Administration Information must have Country Code i.e 255 for Tanzania");return}z(!0);try{const e=await fetch(`${p}/clinics`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({clinicname:i,clinicaddress:o,clinicemail:c.toLowerCase(),clinicphone:l,tax:A,clinic_reg_date:I})});if(e.status===201){const s=await e.json();console.log("Clinic registration successful:",s)}else if(e.status===400){const s=await e.text();console.error("Clinic registration failed:",s),r(s)}else if(e.status===500){const s=await e.text();console.error("Internal Server Error:",s),r("An unexpected error occurred on the server.")}else console.error("Clinic registration failed with status:",e.status),r("An unexpected error occurred.")}catch(e){console.error("Error during Clinic registration:",e),r("A network error occurred.")}try{const e=await fetch(`${p}/users`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({fullName:d,address:y,phone_number:u,email:m.toLowerCase(),password:h,title:"Admin",entity_name:i,registration_date:I})});if(e.status===201){const s=await e.json();console.log("User registration successful:",s)}else if(e.status===400){const s=await e.text();console.error("User registration failed:",s)}else if(e.status===500){const s=await e.text();console.error("Internal Server Error:",s)}else console.error("User registration failed with status:",e.status);f(""),g(""),C(""),v(" "),B(""),w(""),j(""),b(""),S(""),P(""),T(!0)}catch(e){console.error("Error during user registration:",e)}finally{z(!1)}};return t.jsxs(J,{...N,children:[t.jsx(G,{}),t.jsx(D,{enableColorScheme:!0}),t.jsx(x,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(40px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},e=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...e.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:t.jsxs(x,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:[" ",t.jsx(K,{open:O,autoHideDuration:1500,onClose:k,children:t.jsx(L,{onClose:k,severity:"success",variant:"filled",sx:{width:"100%"},children:"Success"})}),t.jsxs(x,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",width:"70%"},spacing:2,children:[t.jsx($,{path:"/entity-registration",pathtype:""})," ",t.jsxs(U,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[t.jsx(M,{variant:"h6",gutterBottom:!0,children:"Clinic Information"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:"red",fontSize:"14"},children:F}),t.jsx(n,{id:"clincname",label:"Clinic Name",value:i,onChange:e=>g(e.target.value),type:"search",variant:"outlined",size:"small"}),t.jsx(n,{id:"clinicaddress",label:"Clinic Address",helperText:"P.o Box 123, Moshi, Kilimanjaro",type:"search",value:o,onChange:e=>f(e.target.value),variant:"outlined",size:"small"}),t.jsx(n,{id:"entity-phone",label:"Clinic Phone Number",type:"search",helperText:"+2557xxxxxxxx",onChange:e=>v(e.target.value),value:l,size:"small",variant:"outlined"}),t.jsx(n,{id:"entity-email",label:"Clinic Email Address",type:"search",onChange:e=>C(e.target.value),value:c,variant:"outlined",size:"small"}),t.jsx(n,{id:"tin",size:"small",label:"Tax/Reg No ......(Optional)",type:"search",onChange:e=>P(e.target.value),value:A,variant:"outlined"})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx(M,{variant:"h6",gutterBottom:!0,children:"Administration Information"}),t.jsx(n,{id:"fullname",label:"Full Name",onChange:e=>j(e.target.value),type:"search",value:d,size:"small",variant:"outlined"}),t.jsx(n,{id:"address",label:"Physical Address",helperText:"P.o Box 123, Moshi, Kilimanjaro",type:"search",size:"small",onChange:e=>S(e.target.value),variant:"outlined",value:y}),t.jsx(n,{id:"phone-number",value:u,onChange:e=>E(e.target.value),label:"Phone Number",helperText:"2557xxxxxxxx",type:"search",size:"small",variant:"outlined"}),t.jsx(n,{id:"email",label:"Email Address",value:m,type:"search",size:"small",onChange:e=>b(e.target.value),variant:"outlined"}),t.jsx(n,{id:"password",label:"Password",onChange:e=>w(e.target.value),type:"search",size:"small",value:h,variant:"outlined"})]}),t.jsx(Y,{sx:{textTransform:"none"},variant:"contained",onClick:R,children:H?t.jsx(V,{size:24,sx:{color:"white"}}):"Register"})]})]})]})})]})}export{ae as S};
