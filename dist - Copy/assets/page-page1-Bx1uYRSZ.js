import{r as a,j as t,al as S,am as x,an as T,ao as _,ac as k,ap as $,aq as I,ar as N,as as D,B as U,q as l,at as P,u as A}from"./vendor-DFbu7K4o.js";function F({idd:h,...j}){const[p,r]=a.useState(!1);a.useState(),M().data;const o="https://dentallab-vg4w.onrender.com",[m,d]=a.useState(""),[c,g]=a.useState(""),[s,i]=a.useState(""),[n,f]=a.useState(""),[y,b]=a.useState(""),[w,v]=a.useState(""),[C,E]=a.useState("");return a.useEffect(()=>{fetch(`${o}/users/update/${h}`,{method:"GET"}).then(async e=>{if(!e.ok){const u=await e.json();throw setErrorMessage(u.message),new Error(u.message)}return e.json()}).then(e=>{e&&(d(e.fullName),g(e.address),i(e.phone_number),f(e.email),v(e.title),E(e.entity_name),b(e.password))}).catch(e=>{console.error("Error fetching user data:",e),reject(e)})},[]),t.jsxs(a.Fragment,{children:[t.jsx(x,{...j,onClick:()=>r(!0)}),t.jsxs($,{open:p,onClose:()=>r(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[t.jsx(I,{id:"alert-dialog-title",children:"Edit This User"}),t.jsxs(N,{children:[t.jsx(D,{id:"alert-dialog-description"}),t.jsx(U,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:t.jsxs("div",{children:[t.jsx(l,{id:"fullname",label:"Full Name",onChange:e=>d(e.target.value),type:"search",value:m,variant:"standard"}),t.jsx(l,{id:"address",label:"Physical Address",type:"search",onChange:e=>g(e.target.value),variant:"standard",value:c}),t.jsx(l,{id:"phone-number",value:s,onChange:e=>i(e.target.value),label:"Phone Number",type:"search",variant:"standard"}),t.jsx(l,{id:"email",label:"Email Address",value:n,type:"search",onChange:e=>f(e.target.value),variant:"standard"}),t.jsx(l,{id:"title",label:"Title (isAdmin ?) ",onChange:e=>v(e.target.value),type:"search",value:w,variant:"standard"}),t.jsx(l,{id:"entityname",label:"Entity Name",onChange:e=>E(e.target.value),type:"search",value:C,variant:"standard"}),t.jsx(l,{id:"password",label:"Password",onChange:e=>b(e.target.value),type:"search",value:y,variant:"standard"})]})})]}),t.jsxs(P,{children:[t.jsx(A,{onClick:()=>r(!1),children:"Cancel"}),t.jsx(A,{variant:"contained",onClick:()=>{fetch(`http://localhost:8080/users/${h}?fullName=${m}&address=${c}&phone_number=${s}&email=${n}&password=${y}&title=${w}&entity_name=${C}`,{method:"PUT"}).then(async e=>{if(!e.ok){const u=await e.json();throw setErrorMessage(u.message),new Error(u.message)}return null}).then(e=>{e&&console.log("done")}).catch(e=>{console.error("Error fetching user data:",e)}),r(!1),deleteUser()},color:"primary",autoFocus:!0,children:"Edit"})]})]})]})}function M(){const h="https://dentallab-vg4w.onrender.com";a.useState([]);const[j,p]=a.useState(),[r,o]=a.useState([]);a.useEffect(()=>{fetch(`${h}/users`,{method:"GET"}).then(s=>s.status===200?s.json():null).then(s=>{s!==null&&o(s)})},[]);const m=a.useCallback(s=>()=>{setTimeout(()=>{o(i=>i.filter(n=>n.id!==s))}),console.log(s)},[]),d=a.useCallback(s=>()=>{o(i=>i.map(n=>n.id===s?{...n,isAdmin:!n.isAdmin}:n)),p(s)},[]);a.useCallback();const c=a.useCallback(s=>()=>{o(i=>{const n=i.find(f=>f.id===s);return[...i,{...n,id:Date.now()}]})},[]),g=a.useMemo(()=>[{field:"fullName",type:"string"},{field:"address",type:"string"},{field:"phone_number",type:"string",width:130},{field:"email",type:"string",width:180},{field:"title",type:"boolean",width:120},{field:"password",type:"string",width:120},{field:"entity_name",type:"string",width:120},{field:"registration_date",type:"string",width:120},{field:"actions",type:"actions",width:120,getActions:s=>[t.jsx(F,{icon:t.jsx(S,{}),label:"Edit",idd:s.id}),t.jsx(x,{icon:t.jsx(T,{}),label:"Toggle Admin",onClick:d(s.id),showInMenu:!0}),t.jsx(x,{icon:t.jsx(_,{}),label:"Duplicate User",onClick:c(s.id),showInMenu:!0})]}],[m,d,c]);return t.jsx("div",{style:{height:600,width:"100%"},children:t.jsx(k,{columns:g,rows:r})})}export{M as C};
