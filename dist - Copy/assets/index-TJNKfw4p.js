import{r as t,w as bn,j as e,aO as se,aP as dt,aQ as yt,aR as ft,aS as ut,aT as bt,aU as vt,aV as Ct,aW as wt,aX as Oe,aY as Sn,aZ as wn,a_ as yn,a$ as vn,b0 as Cn,b1 as En,b2 as Dt,b3 as Tn,b4 as $n,b5 as Nn,b6 as In,b7 as kn,b8 as Pn,n as Le,b9 as xe,V as S,O as Y,ba as $,af as F,v as R,c as Mt,bb as ht,bc as Ot,am as fe,bd as mt,T as Ft,be as Lt,I as O,bf as pe,bg as Fe,bh as zt,ab as Re,bi as ke,bj as Et,bk as Pe,bl as Ae,bm as Tt,ac as te,bn as ae,bo as Ve,bp as He,bq as ve,br as Ce,bs as An,K as We,a3 as Rt,bt as _n,bu as St,a as Dn,bv as Mn,bw as Vt,bx as On,by as Bt,bz as Fn,bA as Ln,bB as zn,bC as Rn,bD as Vn,bE as Bn,bF as Je,bG as qe,bH as Ke,bI as Qe,bJ as Ze,bK as Xe,bL as Un,bM as Yn,bN as Gn}from"./vendor-DFbu7K4o.js";import{S as Hn,u as H,A as _e,a as Wn}from"./page-add-client-DcQ-bK7v.js";import{S as Jn}from"./page-entinty-registration-BakVWlXf.js";import{S as Ut}from"./page-demo-BpGFrVj3.js";import{D as qn}from"./page-index-DTQwvKbq.js";import{O as Kn}from"./page-orders-BGS3qmxY.js";import{A as Qn}from"./page-add-doctor-B3RIl7UF.js";import{C as Zn}from"./page-page1-Bx1uYRSZ.js";import{S as Xn}from"./page-staffview-DqDOHOjM.js";import{V as es}from"./page-view-clients-Dkr3cUHi.js";import{S as ts}from"./page-sign-in-side/SignInSide-DvnC5zG8.js";import"./page-sign-in-side/Content-BrNjm5q8.js";import"./page-Header-DLr4TRPU.js";import"./page-shared-theme/AppTheme-BBEbcC3i.js";import"./page-shared-theme/customizations/inputs-BC531pJQ.js";import"./page-shared-theme/themePrimitives-DAArDkif.js";import"./page-shared-theme/customizations/dataDisplay-8pQXp4gy.js";import"./page-shared-theme/customizations/feedback-BUzlw4ID.js";import"./page-shared-theme/customizations/navigation-DKDdNjcd.js";import"./page-shared-theme/customizations/surfaces-BNKOQ_d2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const h of f)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function a(f){const h={};return f.integrity&&(h.integrity=f.integrity),f.referrerPolicy&&(h.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?h.credentials="include":f.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(f){if(f.ep)return;f.ep=!0;const h=a(f);fetch(f.href,h)}})();const ns={title:"Dental Laboratory"};function ss(){const[n,s]=t.useState(null),a=bn(),u=t.useCallback(()=>{a("/sign-in")},[a]),f=t.useCallback(()=>{s(null),a("/sign-in")},[a]),h=t.useMemo(()=>({session:n,setSession:s}),[n,s]),d=t.useMemo(()=>{const r=[{title:"Dashboard",icon:e.jsx(Tn,{sx:{color:"green"}}),visible:!0},{title:"Dental Entities",icon:e.jsx($n,{sx:{color:"green"}}),segment:"orders",visible:!0}];if(n&&n.user){if(n.user.title==="manager")return[...r,{title:"Users",icon:e.jsx(se,{sx:{color:"green"}}),segment:"page1",visible:!0},{title:"Demo",icon:e.jsx(se,{sx:{color:"green"}}),segment:"demo",visible:!0}];if(n.user.title==="technician")return[{title:"Cases",icon:e.jsx(se,{sx:{color:"green"}}),segment:"tech",children:[{title:"Pending",icon:e.jsx(se,{sx:{color:"green"}}),segment:"tview-cases",visible:!0},{title:"Started",icon:e.jsx(dt,{sx:{color:"green"}}),segment:"tview-started",visible:!0},{title:"Halfway",icon:e.jsx(yt,{sx:{color:"green"}}),segment:"tview-halfway",visible:!0},{title:"Finalizing",icon:e.jsx(ft,{sx:{color:"green"}}),segment:"tview-finalizing",visible:!0},{title:"Completed",icon:e.jsx(ut,{sx:{color:"green"}}),segment:"tview-completed",visible:!0}]}];if(n.user.title==="Admin")return[{title:"Cases",icon:e.jsx(bt,{sx:{color:"green"}}),segment:"case",visible:!0,children:[{title:"Pending Cases",icon:e.jsx(vt,{sx:{color:"green"}}),segment:"view-pending",visible:!0},{title:"Holded Cases",icon:e.jsx(Ct,{sx:{color:"green"}}),segment:"view-onhold",visible:!0},{title:"In Production",icon:e.jsx(dt,{sx:{color:"green"}}),segment:"view-inproduction",visible:!0},{title:"Completed",icon:e.jsx(ut,{sx:{color:"green"}}),segment:"view-completed",visible:!0}]},{title:"Bills",icon:e.jsx(wt,{sx:{color:"green"}}),segment:"bills",visible:!0,children:[{title:"Invoice || Receipt",icon:e.jsx(wt,{sx:{color:"green"}}),segment:"view-invoices",visible:!0}]},{title:"Staff",segment:"staff",icon:e.jsx(se,{sx:{color:"green"}}),visible:!0,children:[{title:"Add Staff",icon:e.jsx(se,{sx:{color:"green"}}),segment:"staffregistration",visible:!0},{title:"View Staffs",segment:"staffview",icon:e.jsx(se,{sx:{color:"green"}})}]},{title:"Clients",icon:e.jsx(se,{sx:{color:"green"}}),segment:"client",visible:!0,children:[{title:"Add Client",icon:e.jsx(se,{sx:{color:"green"}}),segment:"add-client",visible:!0},{title:"View Clients",icon:e.jsx(Oe,{sx:{color:"green"}}),segment:"view-clients",visible:!0}]},{title:"Manage",icon:e.jsx(se,{sx:{color:"green"}}),segment:"manage",visible:!0,children:[{title:"Add Product",icon:e.jsx(se,{sx:{color:"green"}}),segment:"add-product",visible:!0},{title:"View Product",icon:e.jsx(se,{sx:{color:"green"}}),segment:"view-product",visible:!0},{title:"Add Prothesis",icon:e.jsx(se,{sx:{color:"green"}}),segment:"add-prothesis",visible:!0},{title:"View Prothesis",icon:e.jsx(Oe,{sx:{color:"green"}}),segment:"view-prothesis",visible:!0},{title:"Add Condition",icon:e.jsx(se,{sx:{color:"green"}}),segment:"add-condition",visible:!0},{title:"View Conditons",icon:e.jsx(Oe,{sx:{color:"green"}}),segment:"view-conditions",visible:!0},{title:"Add Special Instruction",icon:e.jsx(se,{sx:{color:"green"}}),segment:"add-sinstruction",visible:!0},{title:"View Special Instruction",icon:e.jsx(Oe,{sx:{color:"green"}}),segment:"view-sinstruction",visible:!0},{title:"Add Special Condition",icon:e.jsx(se,{sx:{color:"green"}}),segment:"add-typecondition",visible:!0},{title:"View Special Conditons",icon:e.jsx(Oe,{sx:{color:"green"}}),segment:"view-typecondition",visible:!0},{title:"Add Possible Attachment",icon:e.jsx(se,{sx:{color:"green"}}),segment:"add-enclosed",visible:!0},{title:"View Possible Attachment",icon:e.jsx(Oe,{sx:{color:"green"}}),segment:"view-enclosed",visible:!0}]}];if(n.user.title==="reception")return[{title:"Create Task",icon:e.jsx(bt,{sx:{color:"green"}}),segment:"add-task",visible:!0}];if(n.user.title==="doctor")return[{title:"Case & Task",icon:e.jsx(Sn,{sx:{color:"green"}}),segment:"cases",visible:!0,children:[{title:"Create Task",icon:e.jsx(bt,{sx:{color:"green"}}),segment:"doctor-task",visible:!0},{title:"Create Case",icon:e.jsx(wn,{sx:{color:"green"}}),segment:"create-case",visible:!0},{title:"View Cases",icon:e.jsx(Oe,{sx:{color:"green"}}),segment:"view-cases",visible:!0}]},{title:"Patients",icon:e.jsx(yn,{sx:{color:"green"}}),segment:"patients",visible:!0,children:[{title:"Add Patient",icon:e.jsx(vn,{sx:{color:"green"}}),segment:"add-patient",visible:!0},{title:"View Patients",icon:e.jsx(Cn,{sx:{color:"green"}}),segment:"view-patient",visible:!0}]}]}return r},[n]);return e.jsx(Hn.Provider,{value:h,children:e.jsx(En,{navigation:[{kind:"header",title:"Main items"},...d],branding:ns,session:n,authentication:{signIn:u,signOut:f},children:e.jsx(Dt,{})})})}function as(){const{session:n}=H(),s=Nn();if(!n){const a=`/sign-in?callbackUrl=${encodeURIComponent(s.pathname)}`;return e.jsx(In,{to:a,replace:!0})}return e.jsx(e.Fragment,{children:e.jsx(kn,{children:e.jsx(Pn,{children:e.jsx(Dt,{})})})})}function os(n){const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState(""),[h,d]=t.useState(""),[r,x]=t.useState(""),[g,j]=t.useState(""),[w,N]=t.useState(""),[E,_]=t.useState(""),[k,T]=t.useState(""),V=Le().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A"),z=()=>{var I;fetch(`${s}/users`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({fullName:h,address:r,phone_number:g,email:w,password:E,title:k.toLocaleLowerCase(),registration_date:V,entity_name:(I=a==null?void 0:a.user)==null?void 0:I.entity_name})}).then(D=>D.status==201?D.json():null).then(D=>{f(""),j(" "),T(""),_(""),d(""),N(""),x("")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(0px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},I=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...I.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",mt:0},spacing:2,children:e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"36ch",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx($,{id:"fullname",label:"Full Name",onChange:I=>d(I.target.value),type:"search",value:h,variant:"standard"}),e.jsx($,{id:"address",label:"Physical Address",type:"search",onChange:I=>x(I.target.value),variant:"standard",value:r}),e.jsx($,{id:"phone-number",value:g,onChange:I=>j(I.target.value),label:"Phone Number",type:"search",variant:"standard"}),e.jsx($,{id:"email",label:"Email Address",value:w,type:"search",onChange:I=>N(I.target.value),variant:"standard"}),e.jsx($,{id:"title",label:"Title",onChange:I=>T(I.target.value),type:"search",value:k,variant:"standard"}),e.jsx($,{id:"password",label:"Password",onChange:I=>_(I.target.value),type:"search",value:E,variant:"standard"})]}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:z,children:"Register"})]})})})})]})}function ct(n,s="TZS",a="en-US"){const u=typeof n=="string"?parseFloat(n):n;return isNaN(u)?"Invalid Amount":u.toLocaleString(a,{style:"currency",currency:s})}function Pt(){var kt;const n="https://dentallab-vg4w.onrender.com",s="Work to be done",{session:a}=H(),[u,f]=t.useState(!1);t.useState(!1);const[h,d]=t.useState(null),[r,x]=t.useState(null),[g,j]=t.useState([]);t.useState([]);const[w,N]=t.useState([]),[E,_]=t.useState([]),[k,T]=R.useState(""),[V,z]=t.useState({}),[I,D]=t.useState(!1);t.useState("");const[G,B]=t.useState(!0),[W,L]=t.useState(null),[M,J]=t.useState("");t.useState();const[A,q]=t.useState("");t.useState();const[C,b]=t.useState(""),[p,l]=t.useState(""),[c,v]=R.useState([]),[K,ne]=R.useState([]),[de,me]=t.useState(new Map),[je,X]=R.useState([]);R.useState([]);const[P,Q]=t.useState(!1),[Z,oe]=t.useState([]),[ie,le]=t.useState(),[ue,he]=R.useState([]),[ce,m]=R.useState([]),[y,ee]=R.useState([]),[be,Se]=t.useState({}),[Ie,Be]=t.useState({}),[Ue,Ye]=t.useState({}),[rt,re]=t.useState(!1),[De,et]=t.useState(null),[tt,Me]=t.useState(null),[nt,Ge]=t.useState(null),[st,ze]=R.useState([]);R.useState([]);const[it,at]=t.useState(null);t.useState();const[$t,pt]=t.useState("1"),Jt=o=>{var U;Ge(null);const i=(U=o.target.files)==null?void 0:U[0];et(i)},qt=async()=>{if(!De){Ge("Please select a file first.");return}Me("Uploading..."),Ge(null);try{const o=new FormData;o.append("file",De);const i=await fetch(`${n}/api/files/upload/${A}`,{method:"POST",body:o});if(i.ok)Me(""),re(!0),et(null);else try{const U=await i.json();Me(`${(U==null?void 0:U.message)||i.statusText}`)}catch{Me(`Upload failed: ${i.statusText}`)}}catch(o){Me(`Upload failed: ${o}`)}};t.useEffect(()=>{(async()=>{if(A)try{const i=await fetch(`${n}/switch/${A}`);if(i.ok){const U=await i.json();Be(U.label)}else console.error("Failed to fetch switch states:",i.status)}catch(i){console.error("Error fetching switch states:",i)}})()},[A]),t.useEffect(()=>{(async()=>{if(!A){Ye({});return}try{const i=await fetch(`${n}/at-switch/${A}`);if(i.ok){const U=await i.json();Ye(U.attachmentstate)}else console.error("Failed to fetch switch states: pd not selected",i.status)}catch(i){console.error("Error fetching switch states:",i)}})()},[A]),t.useEffect(()=>{(async()=>{if(!A){Se({});return}try{const i=await fetch(`${n}/spcondition/${A}`);if(i.ok){const U=await i.json();Se(U?U.spcondition:{...be})}else console.error("Failed to fetch switch states:",i.status)}catch(i){console.error("Error fetching switch states:",i)}})()},[A]),R.useEffect(()=>{var o;fetch(`${n}/tpcondition/tp/${(o=a==null?void 0:a.user)==null?void 0:o.entity_name}`,{method:"GET"}).then(i=>i.status===200?i.json():null).then(i=>{i!==null&&m(i)})},[]),R.useEffect(()=>{var o;fetch(`${n}/enclosed/attachment/${(o=a==null?void 0:a.user)==null?void 0:o.entity_name}`,{method:"GET"}).then(i=>i.status===200?i.json():null).then(i=>{i!==null&&ee(i)})},[]),R.useEffect(()=>{var o;fetch(`${n}/sinstruction/instruction/${(o=a==null?void 0:a.user)==null?void 0:o.entity_name}`,{method:"GET"}).then(i=>i.status===200?i.json():null).then(i=>{i!==null&&he(i)})},[]),R.useEffect(()=>{var o;fetch(`${n}/prothesis/pro/${(o=a==null?void 0:a.user)==null?void 0:o.entity_name}`,{method:"GET"}).then(i=>i.status===200?i.json():null).then(i=>{i!==null&&ne(i)})},[]),R.useEffect(()=>{fetch(`${n}/tooth-condition`,{method:"GET"}).then(o=>o.status===200?o.json():null).then(o=>{o!==null&&oe(o)})},[]),t.useEffect(()=>{var o;fetch(`${n}/products/prod/${(o=a==null?void 0:a.user)==null?void 0:o.entity_name}`,{method:"GET"}).then(i=>i.status===200?i.json():null).then(i=>{if(i!==null){v(i);const U=new Map;i.forEach(we=>U.set(we.name,we.price)),me(U)}})},[(kt=a==null?void 0:a.user)==null?void 0:kt.entity_name]),R.useEffect(()=>{var o;fetch(`${n}/clients/byfullname/${(o=a==null?void 0:a.user)==null?void 0:o.name}`,{method:"GET"}).then(i=>i.status===200?i.json():null).then(i=>{i!==null&&j(i)})},[]),t.useEffect(()=>{(async()=>{if(h!=null&&h.fullName)try{const i=await fetch(`${n}/patients/patient/${h.fullName}`);if(i.ok){const U=await i.json();_(U),T("")}else console.error("Failed to fetch patients:",i.status),_([]),T("")}catch(i){console.error("Error fetching patients:",i),_([]),T("")}else _([]),T("")})()},[h==null?void 0:h.fullName]),t.useEffect(()=>{(async()=>{if(h!=null&&h.fullName)try{const i=await fetch(`${n}/cases/dc-case/${h==null?void 0:h.fullName}`);if(i.ok){const U=await i.json();ze(U),T("")}else console.error("Failed to fetch patients:",i.status),ze([]),T("")}catch(i){console.error("Error fetching patients:",i),ze([]),T("")}else ze([]),T("")})()},[h==null?void 0:h.fullName]);const Kt=Mt({palette:{mode:"light",primary:{main:ht[500]},secondary:{main:ht[500]}}}),Qt=(o,i,U,we)=>{if(i){const ye=g.find(jt=>jt.fullName===i);d(ye||null)}else d(null),x(null),at(null),q(""),Be({})},Zt=(o,i,U,we)=>{if(i){at(i);const ye=st.find(jt=>jt.caseNumber===i);x(ye||null),q(ye==null?void 0:ye.id)}else x(null),q(""),Q(!1)},Xt=()=>{D(!0)},xt=()=>{D(!1)},gt=o=>{Q(o)};t.useEffect(()=>{(async()=>{if(B(!0),L(null),r!=null&&r.id)try{const i=await fetch(`${n}/1/api/button-data/${r==null?void 0:r.id}`);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const U=await i.json();z(U.buttonColors),q(r==null?void 0:r.id.toString()),gt(!0)}catch(i){console.error("Error fetching data:",i),L("Error Fetching data")}finally{B(!1)}else N([]),z({})})()},[r==null?void 0:r.id]);const lt=o=>{const i=o.currentTarget.textContent;if(i){const U=w.includes(i),we=U?"outlined":"contained";U?N(w.filter(ye=>ye!==i)):(en(),N([...w,i])),z(ye=>({...ye,[i]:we}))}},en=()=>{N([])},tn=async()=>{try{const o={selectedItems:w,buttonColors:V};console.log(JSON.stringify(o));const i=await fetch(`${n}/1/api/button-data/${r==null?void 0:r.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);console.log(w.length),re(!0)}catch(o){console.error("Error saving button data:",o)}},nn=Array.from({length:8},(o,i)=>18-i).map(o=>e.jsx(F,{onClick:lt,variant:V[o]||"outlined",children:o},o)),sn=Array.from({length:8},(o,i)=>i+21).map(o=>e.jsx(F,{onClick:lt,variant:V[o]||"outlined",children:o},o)),an=Array.from({length:8},(o,i)=>48-i).map(o=>e.jsx(F,{onClick:lt,variant:V[o]||"outlined",children:o},o)),on=Array.from({length:8},(o,i)=>i+31).map(o=>e.jsx(F,{onClick:lt,variant:V[o]||"outlined",children:o},o)),rn=o=>{if(J(o),de.has(o)){const i=de.get(o);b(i),console.log(`The price of ${o} is ${i}`)}else console.log(`Price not found for ${o}`),b("")},Nt=R.useCallback(o=>()=>{fetch(`${n}/task-info/${o}`,{method:"DELETE"}).then(i=>{if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);X(U=>U.filter(we=>we.id!==o)),re(!0)}).catch(i=>{console.error("Error deleting user:",i),re(!0)}),console.log(o)},[X,re]),ln=Ot().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A"),cn=()=>{const o=parseInt(C)*w.length;fetch(`${n}/task-info`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({patientId:r==null?void 0:r.id,product:M,teeth:w.join(","),price:C,prothesis:p,teeth_condition:ie,reg_date:ln,entity_name:h==null?void 0:h.entity_name,total_price:o,doctor:h==null?void 0:h.fullName,caseNumber:r==null?void 0:r.caseNumber,caseId:A,quantity:w.length})}).then(i=>i.status==201?i.json():null).then(i=>{pt("2"),re(!0)})},dn=async()=>{if($t=="1")if(r!=null&&r.id)try{const o=await fetch(`${n}/task-info/patient/${r==null?void 0:r.id}`);if(o.ok){const i=await o.json();gt(!0),X(i),pt("")}else console.error("Failed to fetch patients:",o.status),X([])}catch(o){console.error("Error fetching patients:",o),X([])}else X([]);if(r!=null&&r.id)try{const o=await fetch(`${n}/task-info/patient/${r==null?void 0:r.id}`);if(o.ok){const i=await o.json();gt(!0),X(i),pt("")}else console.error("Failed to fetch patients:",o.status),X([])}catch(o){console.error("Error fetching patients:",o),X([])}else X([])};t.useEffect(()=>{dn()},[r==null?void 0:r.id,$t]);const un=R.useMemo(()=>[{field:"teeth",headerName:"Teeth",type:"string"},{field:"prothesis",headerName:"Prothesis",type:"string",width:100},{field:"teeth_condition",headerName:"Teeth Condition",type:"string",width:100},{field:"product",headerName:"Product",type:"string"},{field:"quantity",headerName:"Qty",type:"string",width:70},{field:"price",headerName:"Price",type:"number",valueFormatter:o=>typeof o=="string"||typeof o=="number"?ct(o):typeof o,width:140},{field:"total_price",headerName:"Total Price",type:"number",valueFormatter:o=>typeof o=="string"||typeof o=="number"?ct(o):typeof o,width:140},{field:"actions",headerName:"Actions",type:"actions",width:120,getActions:o=>[e.jsx(fe,{icon:e.jsx(mt,{}),label:"Delete",onClick:Nt(o.id),showInMenu:!0})]}],[Nt]),hn=o=>i=>{Be({...Ie,[o]:i.target.checked})},fn=o=>i=>{Se({...be,[o]:i.target.checked})},mn=o=>i=>{Ye({...Ue,[o]:i.target.checked})},pn=async()=>{const o={attachmentstate:Ue};try{const i=await fetch(`${n}/at-switch/${A}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});i.ok?re(!0):(console.error("Error saving switch states:",i.status),console.log(JSON.stringify(o)))}catch(i){console.error("Error saving switch states:",i)}},xn=async()=>{const o={spcondition:be};try{const i=await fetch(`${n}/spcondition/${A}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});i.ok?re(!0):(console.error("Error saving switch states:",i.status),console.log(JSON.stringify(o)))}catch(i){console.error("Error saving switch states:",i)}},gn=async()=>{const o={label:Ie};try{const i=await fetch(`${n}/switch/${A}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});console.log(JSON.stringify(o)+A),i.ok?re(!0):console.error("Error saving switch states:",i.status)}catch(i){console.error("Error saving switch states:",i)}},It=(o,i)=>{i!=="clickaway"&&re(!1)},jn=async()=>{if(!u){alert("Accept terms and conditions");return}try{const o=await fetch(`${n}/cases/${A}?isSubmitted=true&status=Pending`,{method:"PUT"});if(!o.ok){const i=await o.json();console.error("API Error:",i),alert(`Submission failed: ${i.message||"An error occurred"}`);return}re(!0)}catch(o){console.error("Fetch Error:",o),alert("Submission failed. Please try again.")}};return e.jsxs(Ft,{theme:Kt,children:[e.jsx(xe,{}),e.jsx(Y,{sx:{display:"flex",flexWrap:"wrap","& > :not(style)":{m:1,width:"100%",padding:3,border:"none"}},children:e.jsxs(Lt,{elevation:3,sx:{border:"none"},children:[e.jsxs(S,{spacing:4,direction:"row",sx:{border:"none",p:2},children:[e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"200",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:24,color:"seagreen",mb:2},children:"DENTIST DETAILS"}),e.jsx(pe,{options:g.map(o=>o.fullName),renderInput:o=>e.jsx(e.Fragment,{children:e.jsx($,{...o,label:"Select Dentist"})}),onChange:Qt,size:"small",sx:{width:400}}),h&&e.jsxs(Y,{sx:{width:400},component:"form",noValidate:!0,autoComplete:"off",children:[e.jsx($,{label:"Full Name",value:h.fullName,fullWidth:!0,margin:"normal",InputProps:{readOnly:!0},size:"small"}),e.jsx($,{label:"Entity",value:h.entity_name,fullWidth:!0,margin:"normal",InputProps:{readOnly:!0},size:"small"}),e.jsx($,{label:"Title",value:h.title,fullWidth:!0,margin:"normal",InputProps:{readOnly:!0},size:"small"})]})]}),e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:400,marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:24,color:"seagreen",mb:2},children:"CHOOSE CASE"}),e.jsx(pe,{options:st.map(o=>o.caseNumber),renderInput:o=>e.jsx($,{...o,label:"Select Case"}),onChange:Zt,size:"small",value:it,sx:{width:350}}),r&&e.jsxs(Y,{component:"form",noValidate:!0,autoComplete:"off",children:[e.jsx($,{label:"Full Name",value:r.patient,fullWidth:!0,margin:"normal",InputProps:{readOnly:!0},size:"small"}),e.jsx($,{label:"Entity",value:r.entity_name,fullWidth:!0,margin:"normal",InputProps:{readOnly:!0},size:"small"}),e.jsx($,{label:"Title",value:r.case_name,fullWidth:!0,margin:"normal",InputProps:{readOnly:!0},size:"small"})]})]})]}),e.jsx(S,{sx:{border:"none",padding:3},children:e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsx(Y,{sx:{display:"flex",flexDirection:"column",alignItems:"left","& > *":{m:1}},children:e.jsxs(S,{direction:"column",sx:{paddingLeft:5,border:0},children:[e.jsx(O,{sx:{paddingTop:3,paddingRight:6,border:0,m:0,fontSize:27},children:s})," ",e.jsxs(S,{direction:"column",spacing:1,children:[e.jsx(S,{children:e.jsxs(Y,{children:[e.jsx(Fe,{size:"small","aria-label":"Small button group",children:nn}),e.jsx(Fe,{size:"small","aria-label":"Small button group",children:sn}),e.jsx(zt,{orientation:"horizontal",variant:"middle",flexItem:!0,sx:{width:600},children:e.jsx(Re,{sx:{backgroundColor:"primary"},label:"",size:"small"})}),e.jsx(Fe,{size:"small","aria-label":"Small button group",children:an}),e.jsx(Fe,{size:"small","aria-label":"Small button group",children:on})]})}),e.jsxs("div",{children:[e.jsxs(F,{onClick:tn,size:"small",sx:{textTransform:"none"},variant:"contained",children:[" ","Saved Selected"]})," ",e.jsxs(F,{onClick:Xt,size:"small",sx:{textTransform:"none"},variant:"contained",children:[" ","Add Product"]}),w.length===0?e.jsx(Re,{label:"None"}):w.map(o=>e.jsx(e.Fragment,{children:e.jsx(Re,{label:o,onDelete:()=>{N(w.filter(i=>i!==o)),z(i=>({...i,[o]:"outlined"}))}},o)}))]}),e.jsxs(ke,{open:I,onClose:xt,PaperProps:{component:"form",onSubmit:o=>{o.preventDefault();const i=new FormData(o.currentTarget),we=Object.fromEntries(i.entries()).email;console.log(we),xt()}},children:[e.jsx(Et,{children:e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:26},children:"Complete Task"})}),e.jsxs(Pe,{children:[e.jsx(Re,{sx:{mb:2,alignItems:"center"},color:"success",label:w.join(",")}),e.jsx("br",{}),e.jsxs(Ae,{children:[e.jsx(pe,{options:K.map(o=>o.name),renderInput:o=>e.jsx($,{...o,label:"Process"}),onChange:(o,i)=>{l(i)},size:"small",sx:{width:350}})," ",e.jsx("br",{}),e.jsx(pe,{options:Z.map(o=>o.name),renderInput:o=>e.jsx($,{...o,label:"Select Tooth Condition"}),onChange:(o,i)=>{le(i)},size:"small",sx:{width:350}})," ",e.jsx("br",{}),e.jsx(pe,{options:c.map(o=>o.name),renderInput:o=>e.jsx($,{...o,label:"Select Product"}),onChange:(o,i)=>{i&&rn(i)},size:"small",sx:{width:350}}),C&&e.jsxs("p",{children:["Price: ",parseInt(C)*w.length]})," "]})]}),e.jsxs(Tt,{children:[e.jsx(F,{onClick:xt,children:"Cancel"}),e.jsx(F,{onClick:cn,type:"submit",children:"Add Info"})]})]})]})]})})]})}),e.jsx(S,{sx:{border:0,padding:3},children:P&&e.jsx("div",{style:{height:"auto",width:"80"},children:e.jsx(te,{rows:je,columns:un,initialState:{pagination:{paginationModel:{pageSize:5}}}})})}),e.jsxs(S,{sx:{border:0,padding:3},children:[" ",e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:24},children:"Special Instruction"})," ",e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsxs(ae,{children:[ue.map(o=>e.jsx(Ve,{control:e.jsx(He,{checked:Ie[o.name]||!1,onChange:hn(o.name)}),label:o.name},o.name)),e.jsx(F,{variant:"contained",onClick:gn,sx:{mt:2,width:30},size:"small",children:"Save"}),e.jsx(ve,{open:rt,autoHideDuration:1500,onClose:It,children:e.jsx(Ce,{onClose:It,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully!"})})]}),e.jsx(S,{children:e.jsxs(ae,{sx:{paddingLeft:5,mt:3},children:[" ",e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:19},children:"Conditions"}),e.jsx(Y,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:e.jsxs(ae,{children:[ce.map(o=>e.jsx(Ve,{control:e.jsx(He,{checked:be[o.name]||!1,onChange:fn(o.name)}),label:o.name},o.name)),e.jsx(F,{variant:"contained",onClick:xn,sx:{mt:2,width:30},size:"small",children:"Save"})]})})]})})]})]}),e.jsxs(S,{sx:{border:"none",padding:3},children:[e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:24},children:"Enclosed"})," ",e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsxs(ae,{sx:{paddingLeft:5,mt:3},children:[e.jsx(Y,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:e.jsxs(ae,{children:[y.map(o=>e.jsx(Ve,{control:e.jsx(He,{checked:Ue[o.attachment]||!1,onChange:mn(o.attachment)}),label:o.attachment},o.attachment)),e.jsx(F,{variant:"contained",onClick:pn,sx:{width:30},size:"small",children:"Save"}),e.jsxs(S,{spacing:2,direction:"column",sx:{border:0,padding:0,marginTop:6},children:[e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:24},children:"Attach (Optional)"})," ",e.jsxs(S,{spacing:2,direction:"row",children:[e.jsx("input",{type:"file",id:"fileInput",onChange:Jt,style:{display:"none",marginTop:"4",padding:0}}),e.jsx(F,{variant:"contained",component:"label",htmlFor:"fileInput",children:"Choose File"}),De&&e.jsxs(O,{variant:"body1",children:["Selected file: ",De.name]}),nt&&e.jsx(O,{color:"error",children:nt}),e.jsx(F,{variant:"contained",onClick:qt,disabled:!De,sx:{mt:2},children:"Upload"}),tt&&e.jsx(O,{sx:{mt:2},children:tt})]})]})]})}),e.jsx(O,{sx:{paddingLeft:2,mt:4,fontWeight:"bold",fontSize:19},children:"Others"}),e.jsx($,{id:"outlined-basic",label:"Others",variant:"outlined",multiline:!0,rows:4,sx:{width:400,mt:2,mb:2}})]})]})]}),e.jsx(S,{sx:{border:"none",padding:3},children:e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsxs(ae,{children:[" ",e.jsx(Y,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:e.jsx(Ve,{control:e.jsx(An,{checked:u,onChange:o=>f(o.target.checked),required:!0}),label:e.jsxs(e.Fragment,{children:[" ","I accept the"," ",e.jsx("a",{href:"",children:"terms and conditions"})]})})})]})]})}),e.jsx(S,{sx:{border:"none",padding:3},children:e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsx(ae,{children:" "})]})}),e.jsx(Y,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:e.jsx(F,{variant:"contained",onClick:jn,color:"success",children:"Submit Task"})})]})})]})}function rs(n){const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState(""),[h,d]=t.useState(""),[r,x]=t.useState("");t.useState(""),t.useState("");const[g,j]=t.useState(""),w=Le().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A"),N=()=>{var E,_;fetch(`${s}/patients`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:u,age:h,phone:r,gender:g,doctor:(E=a==null?void 0:a.user)==null?void 0:E.name,reg_date:w,entity_name:(_=a==null?void 0:a.user)==null?void 0:_.entity_name})}).then(k=>k.status==201?k.json():null).then(k=>{f(""),d(" "),x(""),j("")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(0px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},E=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...E.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",mt:0},spacing:2,children:e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"36ch",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx($,{id:"name",label:"Full Name",onChange:E=>f(E.target.value),type:"search",value:u,variant:"standard"}),e.jsx($,{id:"age",label:"Age",type:"search",onChange:E=>d(E.target.value),variant:"standard",value:h}),e.jsx($,{id:"phone",value:r,onChange:E=>x(E.target.value),label:"Phone Number",type:"search",variant:"standard"}),e.jsx($,{id:"gender",label:"Gender",value:g,type:"search",onChange:E=>j(E.target.value),variant:"standard"})]}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:N,children:"Add Patient"})]})})})})]})}function is(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H();t.useState(0);const[a,u]=t.useState([]);t.useEffect(()=>{var d;fetch(`${n}/patients/patient/${(d=s==null?void 0:s.user)==null?void 0:d.name}`,{method:"GET"}).then(r=>r.status===200?r.json():null).then(r=>{r!==null&&u(r)})},[]);const f=[{field:"id",headerName:"ID",width:70},{field:"name",headerName:"Full Name",width:130},{field:"phone",headerName:"Phone Number",width:130},{field:"doctor",headerName:"Doctor",width:130},{field:"entity_name",headerName:"Entity Name",width:130},{field:"reg_date",headerName:"Registration Date",width:130},{field:"gender",headerName:"Gender",width:130}],h=a;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(te,{rows:h,columns:f,pagination:!0})})]})}function ls(n){var d;const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState("");t.useState(""),t.useState(""),Le().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A");const h=()=>{var r;fetch(`${s}/prothesis`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:u,entity_name:(r=a==null?void 0:a.user)==null?void 0:r.entity_name})}).then(x=>x.status==201?x.json():null).then(x=>{f("")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(0px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},r=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...r.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",mt:0},spacing:2,children:e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"36ch",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx($,{id:"name",label:"Prothesis Name",onChange:r=>f(r.target.value),type:"search",value:u,variant:"standard"}),e.jsx($,{id:"entity_name",label:"Entity Name",type:"search",InputProps:{readOnly:!0},variant:"standard",value:(d=a==null?void 0:a.user)==null?void 0:d.entity_name})]}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:h,children:"Add Prothesis"})]})})})})]})}function cs(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H();t.useState(0);const[a,u]=t.useState([]);t.useEffect(()=>{var d;fetch(`${n}/prothesis/pro/${(d=s==null?void 0:s.user)==null?void 0:d.entity_name}`,{method:"GET"}).then(r=>r.status===200?r.json():null).then(r=>{r!==null&&u(r)})},[]);const f=[{field:"id",headerName:"ID",width:70},{field:"name",headerName:"Prothesis Name",width:130}],h=a;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(te,{rows:h,columns:f,pagination:!0})})]})}function ds(n){const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState(""),[h,d]=t.useState(""),r=Le().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A"),x=()=>{var g;fetch(`${s}/products`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:u,price:h,reg_date:r,entity_name:(g=a==null?void 0:a.user)==null?void 0:g.entity_name})}).then(j=>j.status==201?j.json():null).then(j=>{f(""),d(" ")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(0px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},g=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...g.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",mt:0},spacing:2,children:e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"36ch",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx($,{id:"name",label:"Product Name",onChange:g=>f(g.target.value),type:"search",value:u,variant:"standard"}),e.jsx($,{id:"price",label:"Product Price",type:"search",onChange:g=>d(g.target.value),variant:"standard",value:h})]}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:x,children:"Add Product"})]})})})})]})}function us(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H();t.useState(0);const[a,u]=t.useState([]);t.useEffect(()=>{var d;fetch(`${n}/products/prod/${(d=s==null?void 0:s.user)==null?void 0:d.entity_name}`,{method:"GET"}).then(r=>r.status===200?r.json():null).then(r=>{r!==null&&u(r)})},[]);const f=[{field:"id",headerName:"ID",width:70},{field:"name",headerName:"Product Name",width:130},{field:"price",headerName:"Product Price",width:130},{field:"reg_date",headerName:"Registration Date",width:130}],h=a;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(te,{rows:h,columns:f,pagination:!0})})]})}function hs(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H();t.useState(0);const[a,u]=t.useState([]);t.useEffect(()=>{var d;fetch(`${n}/tooth-condition/conditions/${(d=s==null?void 0:s.user)==null?void 0:d.entity_name}`,{method:"GET"}).then(r=>r.status===200?r.json():null).then(r=>{r!==null&&u(r)})},[]);const f=[{field:"id",headerName:"ID",width:70},{field:"name",headerName:"Possible Tooth Conditon",width:130}],h=a;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(te,{rows:h,columns:f,pagination:!0})})]})}function fs(n){var d;const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState("");t.useState(""),t.useState(""),Le().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A");const h=()=>{var r;fetch(`${s}/tooth-condition`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:u,entity_name:(r=a==null?void 0:a.user)==null?void 0:r.entity_name})}).then(x=>x.status==201?x.json():null).then(x=>{f("")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(0px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},r=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...r.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",mt:0},spacing:2,children:e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"36ch",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx($,{required:!0,id:"name",label:"Possible tooth condition",onChange:r=>f(r.target.value),type:"text",value:u,variant:"standard"}),e.jsx($,{id:"entity_name",label:"Entity Name",type:"search",InputProps:{readOnly:!0},variant:"standard",value:(d=a==null?void 0:a.user)==null?void 0:d.entity_name})]}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:h,children:"Add Condition"})]})})})})]})}function ms(n){var d;const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState("");t.useState(""),t.useState(""),Le().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A");const h=()=>{var r;fetch(`${s}/tpcondition`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:u,entity_name:(r=a==null?void 0:a.user)==null?void 0:r.entity_name})}).then(x=>x.status==201?x.json():null).then(x=>{f("")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(0px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},r=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...r.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",mt:0},spacing:2,children:e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"36ch",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx($,{id:"name",label:"Special Condition",onChange:r=>f(r.target.value),type:"search",value:u,variant:"standard"}),e.jsx($,{id:"entity_name",label:"Entity Name",type:"search",InputProps:{readOnly:!0},variant:"standard",value:(d=a==null?void 0:a.user)==null?void 0:d.entity_name})]}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:h,children:"Add"})]})})})})]})}function ps(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H();t.useState(0);const[a,u]=t.useState([]);t.useEffect(()=>{var d;fetch(`${n}/tpcondition/tp/${(d=s==null?void 0:s.user)==null?void 0:d.entity_name}`,{method:"GET"}).then(r=>r.status===200?r.json():null).then(r=>{r!==null&&u(r)})},[]);const f=[{field:"id",headerName:"ID",width:70},{field:"name",headerName:"Instruction",width:130}],h=a;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(te,{rows:h,columns:f,pagination:!0})})]})}function xs(n){var d;const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState("");t.useState(""),t.useState(""),Le().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A");const h=()=>{var r;fetch(`${s}/sinstruction`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:u,entity_name:(r=a==null?void 0:a.user)==null?void 0:r.entity_name})}).then(x=>x.status==201?x.json():null).then(x=>{f("")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(0px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},r=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...r.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",mt:0},spacing:2,children:e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"36ch",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx($,{id:"name",label:"Special Instruction",onChange:r=>f(r.target.value),type:"search",value:u,variant:"standard"}),e.jsx($,{id:"entity_name",label:"Entity Name",type:"search",InputProps:{readOnly:!0},variant:"standard",value:(d=a==null?void 0:a.user)==null?void 0:d.entity_name})]}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:h,children:"Add"})]})})})})]})}function gs(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H();t.useState(0);const[a,u]=t.useState([]);t.useEffect(()=>{var d;fetch(`${n}/sinstruction/instruction/${(d=s==null?void 0:s.user)==null?void 0:d.entity_name}`,{method:"GET"}).then(r=>r.status===200?r.json():null).then(r=>{r!==null&&u(r)})},[]);const f=[{field:"id",headerName:"ID",width:70},{field:"name",headerName:"Instruction",width:130}],h=a;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(te,{rows:h,columns:f,pagination:!0})})]})}function js(n){var d;const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState("");t.useState(""),t.useState(""),Le().tz("Africa/Nairobi").format("DD/MM/YYYY, h:mm:ss A");const h=()=>{var r;fetch(`${s}/enclosed`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({attachment:u,entity_name:(r=a==null?void 0:a.user)==null?void 0:r.entity_name})}).then(x=>x.status==201?x.json():null).then(x=>{f("")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(0px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},r=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...r.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:e.jsx(S,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto",mt:0},spacing:2,children:e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"36ch",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx($,{id:"name",label:"Possible Attachment Name",onChange:r=>f(r.target.value),type:"search",value:u,variant:"standard"}),e.jsx($,{id:"entity_name",label:"Entity Name",type:"search",InputProps:{readOnly:!0},variant:"standard",value:(d=a==null?void 0:a.user)==null?void 0:d.entity_name})]}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:h,children:"Add"})]})})})})]})}function bs(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H();t.useState(0);const[a,u]=t.useState([]);t.useEffect(()=>{var d;fetch(`${n}/enclosed/attachment/${(d=s==null?void 0:s.user)==null?void 0:d.entity_name}`,{method:"GET"}).then(r=>r.status===200?r.json():null).then(r=>{r!==null&&u(r)})},[]);const f=[{field:"id",headerName:"ID",width:70},{field:"attachment",headerName:"Possible Attachment",width:250}],h=a;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(te,{rows:h,columns:f,pagination:!0})})]})}function Ss(n){var q,C;const s="https://dentallab-vg4w.onrender.com",{session:a}=H(),[u,f]=t.useState([]),[h,d]=t.useState(""),[r,x]=t.useState(""),[g,j]=t.useState("");t.useState("");const[w,N]=t.useState(new Date().getMonth()+1),[E,_]=t.useState(new Date().getFullYear());t.useState();const[k,T]=t.useState(""),[V,z]=t.useState(!1);t.useState(null);const I=(q=a==null?void 0:a.user)==null?void 0:q.entity_name,D=L(I),G=W(E),B=w.toString().padStart(2,"0");function W(b){return b.toString().slice(-2)}function L(b){return b?b.split(" ").map(c=>c.charAt(0).toUpperCase()).join(""):""}async function M(){var b;try{const p=await fetch(`${s}/cases/monthly/${E}/${w}/${(b=a==null?void 0:a.user)==null?void 0:b.entity_name}`);if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const l=await p.json();j((l+1).toString().padStart(4,"0")),console.log(g)}catch(p){console.error("Fetch error:",p)}}const J=b=>{x(b.target.value),T(""),z(!1),M(),console.log(g)};t.useEffect(()=>{(async()=>{var p,l;if((p=a==null?void 0:a.user)!=null&&p.name)try{const c=await fetch(`${s}/patients/patient/${(l=a==null?void 0:a.user)==null?void 0:l.name}`);if(c.ok){const v=await c.json();f(v)}else console.error("Failed to fetch patients:",c.status),f([])}catch(c){console.error("Error fetching patients:",c),f([])}else f([])})()},[(C=a==null?void 0:a.user)==null?void 0:C.name]),Ot().tz("Africa/Nairobi").format("YYYY-MM-DD HH:mm:ss");const A=()=>{var b,p;if(r.trim()===""){T("This Field is Required"),z(!0);return}fetch(`${s}/cases/add-case`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({doctor:(b=a==null?void 0:a.user)==null?void 0:b.name,patient:h,caseNumber:`${D}/CAS/${G}${B}-${g}`,caseName:r,caseStatus:"0",entity_name:(p=a==null?void 0:a.user)==null?void 0:p.entity_name,isSubmitted:!1,status:"Draft"})}).then(l=>l.status==201?l.json():null).then(l=>{j(""),x(""),d("")})};return e.jsxs(_e,{...n,children:[e.jsx(xe,{enableColorScheme:!0}),e.jsx(S,{children:e.jsxs(ae,{sx:{width:350},children:[e.jsx(pe,{options:u.map(b=>b.name),renderInput:b=>e.jsx($,{...b,label:"Choose Patient"}),onChange:(b,p)=>{d(p)},value:h,size:"small",sx:{mb:5}}),e.jsx($,{error:V,id:"name",label:"Case Name",onChange:J,type:"search",value:r,variant:"standard",required:!0,helperText:k,size:"small",sx:{mb:5}}),e.jsx(F,{sx:{textTransform:"none",float:"center"},variant:"contained",onClick:A,children:"Add Case"})]})})]})}const ws=We("div")({height:"100%",display:"flex",alignItems:"center"}),ys=We("div")(({theme:n})=>({border:`1px solid ${n.palette.divider}`,position:"relative",overflow:"hidden",width:"100%",height:26,borderRadius:2})),vs=We("div")({position:"absolute",lineHeight:"24px",width:"100%",display:"flex",justifyContent:"center"}),Cs=We("div")({height:"100%","&.low":{backgroundColor:"#f44336"},"&.medium":{backgroundColor:"#efbb5aa3"},"&.high":{backgroundColor:"#088208a3"}}),Es=t.memo(function(s){const{value:a}=s,u=a*100;return e.jsxs(ys,{children:[e.jsx(vs,{children:`${u.toLocaleString()} %`}),e.jsx(Cs,{className:Rt({low:u<30,medium:u>=30&&u<=70,high:u>70}),style:{maxWidth:`${u}%`}})]})}),Ts=We(_n)(({theme:n})=>({display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center",padding:0,borderRadius:0,[`& .${St.rail}`]:{height:"100%",backgroundColor:"transparent"},[`& .${St.track}`]:{height:"100%",transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter}),"&.low":{backgroundColor:"#f44336"},"&.medium":{backgroundColor:"#efbb5aa3"},"&.high":{backgroundColor:"#088208a3"}},[`& .${St.thumb}`]:{height:"100%",width:5,borderRadius:0,marginTop:0,backgroundColor:Dn("#000000",.2)}})),$s=t.memo(function(s){const{children:a,open:u,value:f}=s;return e.jsx(Mn,{open:u,enterTouchDelay:0,placement:"top",title:f,children:a})});function Ns(n){const{id:s,value:a,field:u}=n,[f,h]=t.useState(Number(a)),d=Vt(),r=t.useCallback(w=>{d.current.setEditCellValue({id:s,field:u,value:w})},[d,u,s]),x=t.useMemo(()=>On(r,60),[r]),g=(w,N)=>{h(N),x(N)};t.useEffect(()=>{h(Number(a))},[a]);const j=w=>{w&&w.querySelector('[type="range"]').focus()};return e.jsx(Ts,{ref:j,classes:{track:Rt({low:f<.3,medium:f>=.3&&f<=.7,high:f>.7})},value:f,max:1,step:1e-5,onChange:g,components:{ValueLabel:$s},valueLabelDisplay:"auto",valueLabelFormat:w=>`${(w*100).toLocaleString()} %`})}function Ee(n){return n.value==null?"":e.jsx(ws,{children:e.jsx(Es,{value:n.value})})}function Te(n){return e.jsx(Ns,{...n})}const ge=["Draft","Received","Pending","Started","Halfway","Finalizing","Completed"],Is=We(Re)(({theme:n})=>{var s,a,u,f,h,d,r,x,g,j,w,N,E,_,k,T,V,z,I,D,G,B,W,L,M,J,A,q,C,b,p,l,c,v,K,ne,de,me,je,X,P,Q,Z,oe,ie,le,ue,he,ce,m,y,ee,be,Se,Ie,Be,Ue,Ye,rt,re,De,et,tt,Me,nt,Ge,st,ze,it,at;return{justifyContent:"left","& .icon":{color:"inherit"},"&.Draft":{color:((u=(a=(s=n==null?void 0:n.vars)==null?void 0:s.palette)==null?void 0:a.default)==null?void 0:u.dark)||((h=(f=n==null?void 0:n.palette)==null?void 0:f.default)==null?void 0:h.dark)||"grey",border:`1px solid ${((x=(r=(d=n==null?void 0:n.vars)==null?void 0:d.palette)==null?void 0:r.default)==null?void 0:x.main)||((j=(g=n==null?void 0:n.palette)==null?void 0:g.default)==null?void 0:j.main)||"lightgrey"}`},"&.Received":{color:((E=(N=(w=n==null?void 0:n.vars)==null?void 0:w.palette)==null?void 0:N.info)==null?void 0:E.dark)||((k=(_=n==null?void 0:n.palette)==null?void 0:_.info)==null?void 0:k.dark)||"blue",border:`1px solid ${((z=(V=(T=n==null?void 0:n.vars)==null?void 0:T.palette)==null?void 0:V.info)==null?void 0:z.main)||((D=(I=n==null?void 0:n.palette)==null?void 0:I.info)==null?void 0:D.main)||"lightblue"}`},"&.Pending":{color:((W=(B=(G=n==null?void 0:n.vars)==null?void 0:G.palette)==null?void 0:B.secondary)==null?void 0:W.dark)||((M=(L=n==null?void 0:n.palette)==null?void 0:L.secondary)==null?void 0:M.dark)||"purple",border:`1px solid ${((q=(A=(J=n==null?void 0:n.vars)==null?void 0:J.palette)==null?void 0:A.secondary)==null?void 0:q.main)||((b=(C=n==null?void 0:n.palette)==null?void 0:C.secondary)==null?void 0:b.main)||"violet"}`},"&.Started":{color:((c=(l=(p=n==null?void 0:n.vars)==null?void 0:p.palette)==null?void 0:l.primary)==null?void 0:c.dark)||((K=(v=n==null?void 0:n.palette)==null?void 0:v.primary)==null?void 0:K.dark)||"darkgreen",border:`1px solid ${((me=(de=(ne=n==null?void 0:n.vars)==null?void 0:ne.palette)==null?void 0:de.primary)==null?void 0:me.main)||((X=(je=n==null?void 0:n.palette)==null?void 0:je.primary)==null?void 0:X.main)||"green"}`},"&.Halfway":{color:((Z=(Q=(P=n==null?void 0:n.vars)==null?void 0:P.palette)==null?void 0:Q.primary)==null?void 0:Z.main)||((ie=(oe=n==null?void 0:n.palette)==null?void 0:oe.primary)==null?void 0:ie.main)||"green",border:`1px solid ${((he=(ue=(le=n==null?void 0:n.vars)==null?void 0:le.palette)==null?void 0:ue.primary)==null?void 0:he.light)||((m=(ce=n==null?void 0:n.palette)==null?void 0:ce.primary)==null?void 0:m.light)||"lightgreen"}`},"&.Finalizing":{color:((be=(ee=(y=n==null?void 0:n.vars)==null?void 0:y.palette)==null?void 0:ee.warning)==null?void 0:be.dark)||((Ie=(Se=n==null?void 0:n.palette)==null?void 0:Se.warning)==null?void 0:Ie.dark)||"orange",border:`1px solid ${((Ye=(Ue=(Be=n==null?void 0:n.vars)==null?void 0:Be.palette)==null?void 0:Ue.warning)==null?void 0:Ye.main)||((re=(rt=n==null?void 0:n.palette)==null?void 0:rt.warning)==null?void 0:re.main)||"yellow"}`},"&.Completed":{color:((tt=(et=(De=n==null?void 0:n.vars)==null?void 0:De.palette)==null?void 0:et.success)==null?void 0:tt.dark)||((nt=(Me=n==null?void 0:n.palette)==null?void 0:Me.success)==null?void 0:nt.dark)||"darkblue",border:`1px solid ${((ze=(st=(Ge=n==null?void 0:n.vars)==null?void 0:Ge.palette)==null?void 0:st.success)==null?void 0:ze.main)||((at=(it=n==null?void 0:n.palette)==null?void 0:it.success)==null?void 0:at.main)||"blue"}`}}}),ks=t.memo(n=>{const{status:s}=n;let a=null;s==="Draft"?a=e.jsx(Bt,{className:"icon"}):s==="Received"?a=e.jsx(Ct,{className:"icon"}):s==="Pending"?a=e.jsx(vt,{className:"icon"}):s==="Started"?a=e.jsx(dt,{className:"icon"}):s==="Halfway"?a=e.jsx(yt,{className:"icon"}):s==="Finalizing"?a=e.jsx(ft,{className:"icon"}):s==="Completed"&&(a=e.jsx(ut,{className:"icon"}));let u=s;return s==="Finalizing"&&(u="Finalizing"),e.jsx(Is,{className:s,icon:a,size:"small",label:u,variant:"outlined"})});function Ps(n){const{id:s,value:a,field:u}=n,f=Fn(),h=Vt(),d=async x=>{await h.current.setEditCellValue({id:s,field:u,value:x.target.value})&&f.editMode===Bn.Cell&&h.current.stopCellEditMode({id:s,field:u,cellToFocusAfter:"below"})},r=(x,g)=>{g==="backdropClick"&&h.current.stopCellEditMode({id:s,field:u,ignoreModifications:!0})};return e.jsx(Ln,{value:a,onChange:d,MenuProps:{onClose:r},sx:{height:"100%","& .MuiSelect-select":{display:"flex",alignItems:"center",pl:1}},autoFocus:!0,fullWidth:!0,open:!0,children:ge.map(x=>{let g=null;x==="Draft"?g=Bt:x==="Received"?g=Ct:x==="Pending"?g=vt:x==="Started"?g=dt:x==="Halfway"?g=yt:x==="Finalizing"?g=ft:x==="Completed"&&(g=ut);let j=x;return x==="Finalizing"&&(j="Finalizing"),e.jsxs(zn,{value:x,children:[e.jsx(Rn,{sx:{minWidth:36},children:e.jsx(g,{fontSize:"small"})}),e.jsx(Vn,{primary:j,sx:{overflow:"hidden"}})]},x)})})}function $e(n){return n.value==null?"":e.jsx(ks,{status:n.value})}function Ne(n){return e.jsx(Ps,{...n})}function As(){const n="https://dentallab-vg4w.onrender.com",[s,a]=t.useState([]);t.useState([]);const u=t.useCallback((d,r)=>()=>{if(r){alert("Cases Submitted You Cant Delete ");return}confirm("Are you sure you want to delete this case?")&&fetch(`${n}/cases/${d}`,{method:"DELETE"}).then(x=>{x.ok?a(g=>g.filter(j=>j.id!==d)):console.error(`Failed to delete case with ID: ${d}`)}).catch(x=>{console.error(`Error deleting case with ID: ${d}`,x)})},[]);t.useEffect(()=>{fetch(`${n}/cases/dc-cases/Majaribio Daktari`,{method:"GET"}).then(d=>d.status===200?d.json():null).then(d=>{d!==null&&a(d)})},[]);const f=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!0},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"submitted",headerName:"isSubmitted",width:100,editable:!1,type:"boolean"},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:d=>[e.jsx(fe,{icon:e.jsx(mt,{}),label:"Delete",onClick:()=>u(d.row.id,d.row.submitted)(),showInMenu:!0},"delete")]}],h=s;return e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:h,columns:f})})})}function _s(){var A,q;const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Pending"),[d,r]=t.useState(!1),[x,g]=t.useState([]),[j,w]=t.useState(),[N,E]=t.useState(),[_,k]=t.useState(!1),[T,V]=t.useState(new Map),[z,I]=t.useState(""),D=()=>{r(!1)},G=C=>{if(w(C),T.has(C)){const b=T.get(C);I(b),console.log(`The ID of ${C} is ${b}`)}else console.log(`Price not found for ${C}`),I("")},B=(C,b)=>{b!=="clickaway"&&k(!1)},W=t.useCallback(C=>()=>{r(!0),E(C)},[]);t.useEffect(()=>{var C;fetch(`${n}/users/${(C=s==null?void 0:s.user)==null?void 0:C.entity_name}/title/technician`,{method:"GET"}).then(b=>b.status===200?b.json():null).then(b=>{if(b!==null){g(b);const p=new Map;b.forEach(l=>p.set(l.fullName,l.id)),V(p)}}),console.log(T)},[(A=s==null?void 0:s.user)==null?void 0:A.entity_name]),t.useEffect(()=>{var C;fetch(`${n}/cases/${f}/${(C=s==null?void 0:s.user)==null?void 0:C.entity_name}`,{method:"GET"}).then(b=>b.status===200?b.json():null).then(b=>{b!==null&&u(b)})},[(q=s==null?void 0:s.user)==null?void 0:q.entity_name]);const L=async()=>{try{const C=await fetch(`http://localhost:8080/cases/${N}?technicianid=${z}&status=Received&technician_name=${j}&isSubmitted=true`,{method:"PUT"});if(!C.ok){const b=await C.json();console.error("API Error:",b);return}u(b=>b.filter(p=>p.id!==N)),k(!0)}catch(C){console.error("Fetch Error:",C)}},M=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!1},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:C=>[e.jsx(fe,{icon:e.jsx(Je,{}),label:"Manage",onClick:W(C.row.id),showInMenu:!0},"manage")]}],J=a;return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:J,columns:M})}),e.jsxs(ke,{open:d,onClose:D,PaperProps:{component:"form",onSubmit:C=>{C.preventDefault();const b=new FormData(C.currentTarget),l=Object.fromEntries(b.entries()).email;console.log(l),D()}},children:[e.jsx(Et,{children:e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:26},children:"Assignment Form"})}),e.jsx(Pe,{children:e.jsxs(Ae,{children:[e.jsx(pe,{options:x.map(C=>C.fullName),renderInput:C=>e.jsx($,{...C,label:"Select Technician"}),onChange:(C,b)=>{G(b)},size:"small",sx:{width:350,mt:1}})," "]})}),e.jsxs(Tt,{children:[e.jsx(F,{sx:{textTransform:"none"},variant:"outlined",onClick:D,children:"Cancel"}),e.jsx(F,{onClick:L,type:"submit",color:"success",variant:"contained",sx:{textTransform:"none"},children:"Assign"})]})]}),e.jsx(ve,{open:_,autoHideDuration:1500,onClose:B,children:e.jsx(Ce,{onClose:B,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully!"})})]})}function Ds(){var g;const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Received"),d=t.useCallback((j,w)=>()=>{if(w){alert("Cases Submitted You Cant Delete ");return}confirm("Are you sure you want to delete this case?")&&fetch(`${n}/cases/${j}`,{method:"DELETE"}).then(N=>{N.ok?u(E=>E.filter(_=>_.id!==j)):console.error(`Failed to delete case with ID: ${j}`)}).catch(N=>{console.error(`Error deleting case with ID: ${j}`,N)})},[]);t.useEffect(()=>{var j;fetch(`${n}/cases/${f}/${(j=s==null?void 0:s.user)==null?void 0:j.entity_name}`,{method:"GET"}).then(w=>w.status===200?w.json():null).then(w=>{w!==null&&u(w)})},[(g=s==null?void 0:s.user)==null?void 0:g.entity_name]);const r=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!0},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:j=>[e.jsx(fe,{icon:e.jsx(mt,{}),label:"Delete",onClick:()=>d(j.row.id,j.row.submitted)(),showInMenu:!0},"delete")]}],x=a;return e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:x,columns:r})})})}function Ms(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Started"),d=t.useCallback((g,j)=>()=>{if(j){alert("Cases Submitted You Cant Delete ");return}confirm("Are you sure you want to delete this case?")&&fetch(`${n}/cases/${g}`,{method:"DELETE"}).then(w=>{w.ok?u(N=>N.filter(E=>E.id!==g)):console.error(`Failed to delete case with ID: ${g}`)}).catch(w=>{console.error(`Error deleting case with ID: ${g}`,w)})},[]);t.useEffect(()=>{var g;fetch(`${n}/cases/${f}/${(g=s==null?void 0:s.user)==null?void 0:g.entity_name}`,{method:"GET"}).then(j=>j.status===200?j.json():null).then(j=>{j!==null&&u(j)})},[]);const r=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!0},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:g=>[e.jsx(fe,{icon:e.jsx(mt,{}),label:"Delete",onClick:()=>d(g.row.id,g.row.submitted)(),showInMenu:!0},"delete")]}],x=a;return e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:x,columns:r})})})}function At(n){const s=new Date,a=new Date(s.getTime()+n*24*60*60*1e3),u=a.getFullYear(),f=String(a.getMonth()+1).padStart(2,"0");return`${String(a.getDate()).padStart(2,"0")}-${f}-${u}`}function Os(){const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Completed"),[d,r]=t.useState(),[x,g]=t.useState(!1),[j,w]=t.useState(!1),[N,E]=t.useState(""),[_,k]=t.useState(""),[T,V]=t.useState(""),[z,I]=t.useState(""),[D,G]=t.useState(""),[B,W]=t.useState(""),L=parseInt(D)>14?parseInt(D):14,M=()=>{w(!1)},J=(c,v)=>{v!=="clickaway"&&g(!1)},A=t.useCallback((c,v)=>()=>{k(v),w(!0),r(c)},[]);t.useEffect(()=>{var c;fetch(`${n}/cases/${f}/${(c=s==null?void 0:s.user)==null?void 0:c.entity_name}`,{method:"GET"}).then(v=>v.status===200?v.json():null).then(v=>{v!==null&&u(v)})},[]);const q=async()=>{var c,v,K;try{const ne=await fetch(`${n}/bills`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({caseId:d,doctype:"invoice",discount:T,additionalcost:z,lastingdays:D,entityname:(c=s==null?void 0:s.user)==null?void 0:c.entity_name,bill_date:At(0),billend:At(L),client:_})});if(!ne.ok){console.error("Error creating bill:",await ne.json());return}const de=await ne.json(),me=de.id,je=de.doctype,X=await fetch(`${n}/bills/count-by-entityname?entityname=${(v=s==null?void 0:s.user)==null?void 0:v.entity_name}`,{method:"GET"});if(!X.ok){console.error("Error fetching invoice count:",await X.json());return}const P=await X.json(),Q=P,Z=(K=s==null?void 0:s.user)==null?void 0:K.entity_name,oe=l(Z),ie=new Date().getFullYear(),le=p(ie),he=(new Date().getMonth()+1).toString().padStart(2,"0"),ce=Q.toString().padStart(4,"0"),m=je=="invoice"?"INV":"RCPT",y=`${oe}/${m}/${le}${he}-${ce}`,ee=await fetch(`${n}/bills/invoicecount/${me}?invoiceCount=${Q}&doctype=invoice&docnumber=${y}`,{method:"PUT"});if(!ee.ok){console.error("Error updating invoice count:",await ee.json());return}V(""),I(""),G(""),W(P),g(!0),console.log("BillId:  ",me),console.log("Count:  ",Q)}catch(ne){console.error("Error:",ne)}};t.useEffect(()=>{(async()=>{if(d)try{fetch(`${n}/bills/by-caseId/${d}`,{method:"GET"}).then(v=>v.status===200?v.json():null).then(v=>{v!==null&&(E(v.id),console.log(v.id))})}catch(v){console.error("Error fetching case:",v),E("")}else E("")})()},[d]);const C=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!0},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:c=>[e.jsx(fe,{icon:e.jsx(wt,{sx:{color:"green"}}),label:"Generate Bill",onClick:A(c.row.id,c.row.doctor),showInMenu:!0},"bill")]}],b=a;function p(c){return c.toString().slice(-2)}function l(c){return c?c.split(" ").map(ne=>ne.charAt(0).toUpperCase()).join(""):""}return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:b,columns:C})}),e.jsxs(ke,{open:j,onClose:M,PaperProps:{component:"form",onSubmit:c=>{c.preventDefault();const v=new FormData(c.currentTarget),ne=Object.fromEntries(v.entries()).email;console.log(ne),M()}},children:[e.jsx(Et,{children:e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:26,color:"darkgreen"},children:"Bill Extra Information"})}),e.jsx(Pe,{children:e.jsx(Ae,{children:e.jsxs(ae,{children:[e.jsx($,{required:!0,id:"discount",label:"Possible Discount",onChange:c=>V(c.target.value),value:T,variant:"standard"}),e.jsx($,{id:"additionalcost",label:"Additional Cost",onChange:c=>I(c.target.value),variant:"standard",value:z}),e.jsx($,{id:"lastingdays",label:"Possible Lasting Days",onChange:c=>G(c.target.value),variant:"standard",value:D})]})})}),e.jsxs(Tt,{children:[e.jsx(F,{sx:{textTransform:"none"},variant:"outlined",onClick:M,children:"Cancel"}),e.jsx(F,{onClick:q,type:"submit",color:"success",variant:"contained",sx:{textTransform:"none"},children:"Create Bill"})]})]}),e.jsx(ve,{open:x,autoHideDuration:1500,onClose:J,children:e.jsx(Ce,{onClose:J,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully!"})})]})}function ot(n){const s="https://dentallab-vg4w.onrender.com",a="Adult Tooth Chart";H(),t.useState(!1),t.useState(!1),t.useState(null),t.useState(null),t.useState([]),t.useState([]);const[u,f]=t.useState([]),[h,d]=t.useState([]),[r,x]=R.useState(""),[g,j]=t.useState({});t.useState(!1),t.useState("");const[w,N]=t.useState(!0),[E,_]=t.useState(null);t.useState(""),t.useState();const[k,T]=t.useState(n.caseId);t.useState(),t.useState(""),t.useState(""),R.useState([]);const[V,z]=R.useState([]);t.useState(new Map);const[I,D]=R.useState([]);R.useState([]);const[G,B]=t.useState(!1),[W,L]=t.useState([]);t.useState();const[M,J]=t.useState({}),[A,q]=t.useState({}),[C,b]=t.useState({});t.useState(!1),t.useState(null),t.useState(null),t.useState(null);const[p,l]=R.useState(null);t.useState(null);const[c,v]=t.useState(n.caseId),[K,ne]=t.useState("");t.useState("");const[de,me]=R.useState([]),[je,X]=R.useState([]),[P,Q]=R.useState([]);t.useEffect(()=>{(async()=>{if(c)try{const y=await fetch(`${s}/cases/${c}`);if(y.ok){const ee=await y.json();l(ee),x("")}else console.error("Failed to fetch patients:",y.status)}catch(y){console.error("Error fetching patients:",y)}})()},[c]),t.useEffect(()=>{(async()=>{if(k)try{const y=await fetch(`${s}/switch/${k}`);if(y.ok){const ee=await y.json();q(ee.label)}else console.error("Failed to fetch switch states:",y.status)}catch(y){console.error("Error fetching switch states:",y)}})()},[k]),t.useEffect(()=>{(async()=>{if(!k){b({});return}try{const y=await fetch(`${s}/at-switch/${k}`);if(y.ok){const ee=await y.json();b(ee.attachmentstate)}else console.error("Failed to fetch switch states: pd not selected",y.status)}catch(y){console.error("Error fetching switch states:",y)}})()},[k]),t.useEffect(()=>{(async()=>{if(!k){J({});return}try{const y=await fetch(`${s}/spcondition/${c}`);if(y.ok){const ee=await y.json();J(ee?ee.spcondition:{...M})}else console.error("Failed to fetch switch states:",y.status)}catch(y){console.error("Error fetching switch states:",y)}})()},[c]),R.useEffect(()=>{fetch(`${s}/tpcondition/tp/${p==null?void 0:p.entity_name}`,{method:"GET"}).then(m=>m.status===200?m.json():null).then(m=>{m!==null&&X(m)})},[p==null?void 0:p.entity_name]),R.useEffect(()=>{fetch(`${s}/enclosed/attachment/${p==null?void 0:p.entity_name}`,{method:"GET"}).then(m=>m.status===200?m.json():null).then(m=>{m!==null&&Q(m)})},[p==null?void 0:p.entity_name]),R.useEffect(()=>{fetch(`${s}/sinstruction/instruction/${p==null?void 0:p.entity_name}`,{method:"GET"}).then(m=>m.status===200?m.json():null).then(m=>{m!==null&&me(m)})},[p==null?void 0:p.entity_name]),R.useEffect(()=>{fetch(`${s}/prothesis/pro/${p==null?void 0:p.entity_name}`,{method:"GET"}).then(m=>m.status===200?m.json():null).then(m=>{m!==null&&z(m)})},[p==null?void 0:p.entity_name]),R.useEffect(()=>{fetch(`${s}/tooth-condition`,{method:"GET"}).then(m=>m.status===200?m.json():null).then(m=>{m!==null&&L(m)})},[]),t.useEffect(()=>{(async()=>{if(K)try{const y=await fetch(`${s}/patients/patient/${K}`);if(y.ok){const ee=await y.json();d(ee),x("")}else console.error("Failed to fetch patients:",y.status),d([]),x("")}catch(y){console.error("Error fetching patients:",y),d([]),x("")}else d([]),x("")})()},[K]);const Z=Mt({palette:{mode:"light",primary:{main:ht[500]},secondary:{main:ht[500]}}});t.useEffect(()=>{(async()=>{if(N(!0),_(null),c)try{const y=await fetch(`${s}/1/api/button-data/${k}`);if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const ee=await y.json();j(ee.buttonColors),T(c),B(!0)}catch(y){console.error("Error fetching data:",y),_("Error Fetching data")}finally{N(!1)}else f([]),j({})})()},[c]);const oe=Array.from({length:8},(m,y)=>18-y).map(m=>e.jsx(F,{variant:g[m]||"outlined",children:m},m)),ie=Array.from({length:8},(m,y)=>y+21).map(m=>e.jsx(F,{variant:g[m]||"outlined",children:m},m)),le=Array.from({length:8},(m,y)=>48-y).map(m=>e.jsx(F,{variant:g[m]||"outlined",children:m},m)),ue=Array.from({length:8},(m,y)=>y+31).map(m=>e.jsx(F,{variant:g[m]||"outlined",children:m},m)),he=async()=>{if(c)try{const m=await fetch(`${s}/task-info/patient/${c}`);if(m.ok){const y=await m.json();D(y)}else console.error("Failed to fetch patients:",m.status),D([])}catch(m){console.error("Error fetching patients:",m),D([])}else D([])};t.useEffect(()=>{he()},[c]);const ce=R.useMemo(()=>[{field:"teeth",type:"string"},{field:"prothesis",type:"string"},{field:"teeth_condition",type:"string"},{field:"product",type:"string"},{field:"price",type:"string"},{field:"reg_date",type:"string"}],[]);return e.jsxs(Ft,{theme:Z,children:[e.jsx(xe,{}),e.jsx(Y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",height:"50vh","& > :not(style)":{m:1,width:"80%",padding:3,border:"none"}},children:e.jsxs(Lt,{elevation:3,sx:{border:"none"},children:[e.jsxs(S,{spacing:1,direction:"column",sx:{border:"none",p:1},children:[e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"200",marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsx(O,{sx:{paddingLeft:0,fontWeight:"bold",fontSize:18},children:"DENTIST DETAILS"}),e.jsx(Y,{sx:{width:600,mb:5},component:"form",noValidate:!0,autoComplete:"off",children:e.jsxs(S,{spacing:2,direction:"row",children:[e.jsx(O,{children:"Doctor Name:"}),e.jsxs(O,{children:[" ",p==null?void 0:p.doctor]})," "]})})]}),e.jsxs(Y,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:300,marginTop:0}},noValidate:!0,autoComplete:"off",children:[e.jsx(O,{sx:{paddingLeft:0,fontWeight:"bold",fontSize:18},children:"PATIENT DETAILS"}),e.jsxs(Y,{component:"form",noValidate:!0,autoComplete:"off",sx:{width:600},children:[e.jsxs(S,{spacing:2,direction:"row",children:[e.jsx(O,{children:"Patient Name:"}),e.jsxs(O,{children:[" ",p==null?void 0:p.patient]})," "]}),e.jsxs(S,{spacing:2,direction:"row",children:[e.jsx(O,{children:"Patient At:"}),e.jsxs(O,{children:[" ",p==null?void 0:p.entity_name]})," "]}),e.jsxs(S,{spacing:2,direction:"row",children:[e.jsx(O,{children:"Case Number:"}),e.jsxs(O,{children:[" ",p==null?void 0:p.caseNumber]})," "]}),e.jsxs(S,{spacing:2,direction:"row",children:[e.jsx(O,{children:"Case Status:"}),e.jsxs(O,{children:[" ",p==null?void 0:p.status]})]})]})]})]}),e.jsx(S,{sx:{border:"none",padding:1},children:e.jsxs(S,{sx:{border:0,paddingLeft:1},children:[" ",e.jsx(Y,{sx:{display:"flex",flexDirection:"column",alignItems:"left","& > *":{m:1}},children:e.jsxs(S,{direction:"column",sx:{paddingLeft:1,border:0},children:[e.jsx(O,{sx:{paddingTop:1,paddingRight:6,border:0,m:0,fontSize:27},children:a})," ",e.jsxs(S,{direction:"column",spacing:1,children:[e.jsx(S,{children:e.jsxs(Y,{children:[e.jsx(Fe,{size:"small","aria-label":"Small button group",children:oe}),e.jsx(Fe,{size:"small","aria-label":"Small button group",children:ie}),e.jsx(zt,{orientation:"horizontal",variant:"middle",flexItem:!0,sx:{width:600},children:e.jsx(Re,{sx:{backgroundColor:"info"},label:"",size:"small"})}),e.jsx(Fe,{size:"small","aria-label":"Small button group",children:le}),e.jsx(Fe,{size:"small","aria-label":"Small button group",children:ue})]})}),e.jsx("div",{children:u.length===0?e.jsx(O,{}):u.map(m=>e.jsx(e.Fragment,{children:e.jsx(Re,{label:m,onDelete:()=>{f(u.filter(y=>y!==m)),j(y=>({...y,[m]:"outlined"}))}},m)}))})]})]})})]})}),e.jsx(S,{sx:{border:0,padding:3},children:G&&e.jsx("div",{style:{height:"auto",width:"80%"},children:e.jsx(te,{rows:I,columns:ce,initialState:{pagination:{paginationModel:{pageSize:5}}}})})}),e.jsxs(S,{sx:{border:0,padding:3},children:[" ",e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:24},children:"Special Instruction"})," ",e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsx(ae,{children:de.map(m=>e.jsx(Ve,{control:e.jsx(He,{checked:A[m.name]||!1}),label:m.name},m.name))}),e.jsx(S,{children:e.jsxs(ae,{sx:{paddingLeft:5,mt:3},children:[" ",e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:19},children:"Conditions"}),e.jsx(Y,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:e.jsx(ae,{children:je.map(m=>e.jsx(Ve,{control:e.jsx(He,{checked:M[m.name]||!1}),label:m.name},m.name))})})]})})]})]}),e.jsxs(S,{sx:{border:"none",padding:3},children:[e.jsx(O,{sx:{paddingLeft:2,fontWeight:"bold",fontSize:24},children:"Enclosed"})," ",e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsxs(ae,{sx:{paddingLeft:5,mt:3},children:[e.jsx(Y,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:e.jsx(ae,{children:P.map(m=>e.jsx(Ve,{control:e.jsx(He,{checked:C[m.attachment]||!1}),label:m.attachment},m.attachment))})}),e.jsx(O,{sx:{paddingLeft:2,mt:4,fontWeight:"bold",fontSize:19},children:"Others"}),e.jsx($,{id:"outlined-basic",label:"Others",variant:"outlined",multiline:!0,rows:4,sx:{width:400,mt:2,mb:2}})]})]})]}),e.jsx(S,{sx:{border:"none",padding:3},children:e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsxs(ae,{children:[" ",e.jsx(Y,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})]})]})}),e.jsx(S,{sx:{border:"none",padding:3},children:e.jsxs(S,{sx:{border:0,paddingLeft:2},children:[" ",e.jsxs(ae,{children:[" ",e.jsx(Y,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})]})]})})]})})]})}function Yt(){return[{status:"Started",value:"0.25"}]}function Fs(){const n=Yt(),s=new Map;for(const a of n)s.set(a.status,a.value);return s}const Ls=t.forwardRef(function(s,a){return e.jsx(qe,{direction:"up",ref:a,...s})});function zs(){var b,p;const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Received"),[d,r]=t.useState(!1),[x,g]=t.useState([]);t.useState();const[j,w]=t.useState(),N=Yt(),E=Fs(),[_,k]=t.useState(!1),[T,V]=t.useState(new Map);t.useState("");const[z,I]=t.useState(""),[D,G]=t.useState(""),B=(b=s==null?void 0:s.user)==null?void 0:b.name,W=()=>{r(!1)},L=l=>{if(I(l),E.has(l)){const c=E.get(l);G(c),console.log(`The ID of ${l} is ${c}`)}else console.log(`Price not found for ${l}`),G("")},M=(l,c)=>{c!=="clickaway"&&k(!1)},J=t.useCallback(l=>()=>{r(!0),w(l)},[]);t.useEffect(()=>{var l;fetch(`${n}/users/${(l=s==null?void 0:s.user)==null?void 0:l.entity_name}/title/technician`,{method:"GET"}).then(c=>c.status===200?c.json():null).then(c=>{if(c!==null){g(c);const v=new Map;c.forEach(K=>v.set(K.fullName,K.id)),V(v)}}),console.log(T)},[(p=s==null?void 0:s.user)==null?void 0:p.entity_name]),t.useEffect(()=>{fetch(`${n}/cases/status/${f}/${T.get(B)}`,{method:"GET"}).then(l=>l.status===200?l.json():null).then(l=>{l!==null&&u(l)})},[T.get(B)]);const A=async()=>{try{const l=await fetch(`${n}/cases/${j}?status=${z}&caseStatus=${D}&isSubmitted=true`,{method:"PUT"});if(!l.ok){const c=await l.json();console.error("API Error:",c);return}u(c=>c.filter(v=>v.id!==j)),k(!0)}catch(l){console.error("Fetch Error:",l)}},q=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!1},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:l=>[e.jsx(fe,{icon:e.jsx(Je,{}),label:"Manage",onClick:J(l.row.id),showInMenu:!0},"manage")]}],C=a;return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:C,columns:q})}),e.jsxs(ke,{fullScreen:!0,open:d,onClose:W,TransitionComponent:Ls,children:[e.jsx(Ke,{sx:{position:"relative"},children:e.jsxs(Qe,{children:[e.jsx(Ze,{edge:"start",color:"inherit",onClick:W,"aria-label":"close",children:e.jsx(Xe,{})}),e.jsx(O,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Close"})," ",e.jsx(pe,{options:N.map(l=>l.status),renderInput:l=>e.jsx($,{...l,label:"Progress Status"}),onChange:(l,c)=>{L(c)},size:"small",sx:{width:170,mt:1}}),e.jsx(F,{autoFocus:!0,color:"inherit",onClick:A,children:"save"})]})}),e.jsx(Pe,{children:e.jsx(Ae,{children:e.jsx(ot,{caseId:j})})})]}),e.jsx(ve,{open:_,autoHideDuration:1500,onClose:M,children:e.jsx(Ce,{onClose:M,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully!"})})]})}function Gt(){return[{status:"Halfway",value:"0.5"}]}function Rs(){const n=Gt(),s=new Map;for(const a of n)s.set(a.status,a.value);return s}const Vs=t.forwardRef(function(s,a){return e.jsx(qe,{direction:"up",ref:a,...s})});function Bs(){var b,p;const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Started"),[d,r]=t.useState(!1),[x,g]=t.useState([]);t.useState();const[j,w]=t.useState(),N=Gt(),E=Rs(),[_,k]=t.useState(!1),[T,V]=t.useState(new Map);t.useState("");const[z,I]=t.useState(""),[D,G]=t.useState(""),B=(b=s==null?void 0:s.user)==null?void 0:b.name,W=()=>{r(!1)},L=l=>{if(I(l),E.has(l)){const c=E.get(l);G(c),console.log(`The ID of ${l} is ${c}`)}else console.log(`Price not found for ${l}`),G("")},M=(l,c)=>{c!=="clickaway"&&k(!1)},J=t.useCallback(l=>()=>{r(!0),w(l)},[]);t.useEffect(()=>{var l;fetch(`${n}/users/${(l=s==null?void 0:s.user)==null?void 0:l.entity_name}/title/technician`,{method:"GET"}).then(c=>c.status===200?c.json():null).then(c=>{if(c!==null){g(c);const v=new Map;c.forEach(K=>v.set(K.fullName,K.id)),V(v)}}),console.log(T)},[(p=s==null?void 0:s.user)==null?void 0:p.entity_name]),t.useEffect(()=>{fetch(`${n}/cases/status/${f}/${T.get(B)}`,{method:"GET"}).then(l=>l.status===200?l.json():null).then(l=>{l!==null&&u(l)})},[T.get(B)]);const A=async()=>{try{const l=await fetch(`${n}/cases/${j}?status=${z}&caseStatus=${D}&isSubmitted=true`,{method:"PUT"});if(!l.ok){const c=await l.json();console.error("API Error:",c);return}u(c=>c.filter(v=>v.id!==j)),k(!0)}catch(l){console.error("Fetch Error:",l)}},q=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!1},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:l=>[e.jsx(fe,{icon:e.jsx(Je,{}),label:"Manage",onClick:J(l.row.id),showInMenu:!0},"manage")]}],C=a;return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:C,columns:q})}),e.jsxs(ke,{fullScreen:!0,open:d,onClose:W,TransitionComponent:Vs,children:[e.jsx(Ke,{sx:{position:"relative"},children:e.jsxs(Qe,{children:[e.jsx(Ze,{edge:"start",color:"inherit",onClick:W,"aria-label":"close",children:e.jsx(Xe,{})}),e.jsx(O,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Close"})," ",e.jsx(pe,{options:N.map(l=>l.status),renderInput:l=>e.jsx($,{...l,label:"Progress Status"}),onChange:(l,c)=>{L(c)},size:"small",sx:{width:170,mt:1}}),e.jsx(F,{autoFocus:!0,color:"inherit",onClick:A,children:"save"})]})}),e.jsx(Pe,{children:e.jsx(Ae,{children:e.jsx(ot,{caseId:j})})})]}),e.jsx(ve,{open:_,autoHideDuration:1500,onClose:M,children:e.jsx(Ce,{onClose:M,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully!"})})]})}function Ht(){return[{status:"Finalizing",value:"0.75"}]}function Us(){const n=Ht(),s=new Map;for(const a of n)s.set(a.status,a.value);return s}const Ys=t.forwardRef(function(s,a){return e.jsx(qe,{direction:"up",ref:a,...s})});function Gs(){var b,p;const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Halfway"),[d,r]=t.useState(!1),[x,g]=t.useState([]);t.useState();const[j,w]=t.useState(),N=Ht(),E=Us(),[_,k]=t.useState(!1),[T,V]=t.useState(new Map);t.useState("");const[z,I]=t.useState(""),[D,G]=t.useState(""),B=(b=s==null?void 0:s.user)==null?void 0:b.name,W=()=>{r(!1)},L=l=>{if(I(l),E.has(l)){const c=E.get(l);G(c),console.log(`The ID of ${l} is ${c}`)}else console.log(`Price not found for ${l}`),G("")},M=(l,c)=>{c!=="clickaway"&&k(!1)},J=t.useCallback(l=>()=>{r(!0),w(l)},[]);t.useEffect(()=>{var l;fetch(`${n}/users/${(l=s==null?void 0:s.user)==null?void 0:l.entity_name}/title/technician`,{method:"GET"}).then(c=>c.status===200?c.json():null).then(c=>{if(c!==null){g(c);const v=new Map;c.forEach(K=>v.set(K.fullName,K.id)),V(v)}}),console.log(T)},[(p=s==null?void 0:s.user)==null?void 0:p.entity_name]),t.useEffect(()=>{fetch(`${n}/cases/status/${f}/${T.get(B)}`,{method:"GET"}).then(l=>l.status===200?l.json():null).then(l=>{l!==null&&u(l)})},[T.get(B)]);const A=async()=>{try{const l=await fetch(`${n}/cases/${j}?status=${z}&caseStatus=${D}&isSubmitted=true`,{method:"PUT"});if(!l.ok){const c=await l.json();console.error("API Error:",c);return}u(c=>c.filter(v=>v.id!==j)),k(!0)}catch(l){console.error("Fetch Error:",l)}},q=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!1},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:l=>[e.jsx(fe,{icon:e.jsx(Je,{}),label:"Manage",onClick:J(l.row.id),showInMenu:!0},"manage")]}],C=a;return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:C,columns:q})}),e.jsxs(ke,{fullScreen:!0,open:d,onClose:W,TransitionComponent:Ys,children:[e.jsx(Ke,{sx:{position:"relative"},children:e.jsxs(Qe,{children:[e.jsx(Ze,{edge:"start",color:"inherit",onClick:W,"aria-label":"close",children:e.jsx(Xe,{})}),e.jsx(O,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Close"})," ",e.jsx(pe,{options:N.map(l=>l.status),renderInput:l=>e.jsx($,{...l,label:"Progress Status"}),onChange:(l,c)=>{L(c)},size:"small",sx:{width:170,mt:1}}),e.jsx(F,{autoFocus:!0,color:"inherit",onClick:A,children:"save"})]})}),e.jsx(Pe,{children:e.jsx(Ae,{children:e.jsx(ot,{caseId:j})})})]}),e.jsx(ve,{open:_,autoHideDuration:1500,onClose:M,children:e.jsx(Ce,{onClose:M,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully!"})})]})}function Wt(){return[{status:"Completed",value:"1"}]}function Hs(){const n=Wt(),s=new Map;for(const a of n)s.set(a.status,a.value);return s}const Ws=t.forwardRef(function(s,a){return e.jsx(qe,{direction:"up",ref:a,...s})});function Js(){var b,p;const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Finalizing"),[d,r]=t.useState(!1),[x,g]=t.useState([]);t.useState();const[j,w]=t.useState(),N=Wt(),E=Hs(),[_,k]=t.useState(!1),[T,V]=t.useState(new Map);t.useState("");const[z,I]=t.useState(""),[D,G]=t.useState(""),B=(b=s==null?void 0:s.user)==null?void 0:b.name,W=()=>{r(!1)},L=l=>{if(I(l),E.has(l)){const c=E.get(l);G(c),console.log(`The ID of ${l} is ${c}`)}else console.log(`Price not found for ${l}`),G("")},M=(l,c)=>{c!=="clickaway"&&k(!1)},J=t.useCallback(l=>()=>{r(!0),w(l)},[]);t.useEffect(()=>{var l;fetch(`${n}/users/${(l=s==null?void 0:s.user)==null?void 0:l.entity_name}/title/technician`,{method:"GET"}).then(c=>c.status===200?c.json():null).then(c=>{if(c!==null){g(c);const v=new Map;c.forEach(K=>v.set(K.fullName,K.id)),V(v)}}),console.log(T)},[(p=s==null?void 0:s.user)==null?void 0:p.entity_name]),t.useEffect(()=>{fetch(`${n}/cases/status/${f}/${T.get(B)}`,{method:"GET"}).then(l=>l.status===200?l.json():null).then(l=>{l!==null&&u(l)})},[T.get(B)]);const A=async()=>{try{const l=await fetch(`${n}/cases/${j}?status=${z}&caseStatus=${D}&isSubmitted=true`,{method:"PUT"});if(!l.ok){const c=await l.json();console.error("API Error:",c);return}u(c=>c.filter(v=>v.id!==j)),k(!0)}catch(l){console.error("Fetch Error:",l)}},q=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!1},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:l=>[e.jsx(fe,{icon:e.jsx(Je,{}),label:"Manage",onClick:J(l.row.id),showInMenu:!0},"manage")]}],C=a;return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:C,columns:q})}),e.jsxs(ke,{fullScreen:!0,open:d,onClose:W,TransitionComponent:Ws,children:[e.jsx(Ke,{sx:{position:"relative"},children:e.jsxs(Qe,{children:[e.jsx(Ze,{edge:"start",color:"inherit",onClick:W,"aria-label":"close",children:e.jsx(Xe,{})}),e.jsx(O,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Close"})," ",e.jsx(pe,{options:N.map(l=>l.status),renderInput:l=>e.jsx($,{...l,label:"Progress Status"}),onChange:(l,c)=>{L(c)},size:"small",sx:{width:170,mt:1}}),e.jsx(F,{autoFocus:!0,color:"inherit",onClick:A,children:"save"})]})}),e.jsx(Pe,{children:e.jsx(Ae,{children:e.jsx(ot,{caseId:j})})})]}),e.jsx(ve,{open:_,autoHideDuration:1500,onClose:M,children:e.jsx(Ce,{onClose:M,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully!"})})]})}function qs(){return[{status:"Started",value:"0.25"},{status:"Halfway",value:"0.5"},{status:"Finalizing",value:"0.75"},{status:"Completed",value:"1"}]}function Ks(){const n=qs(),s=new Map;for(const a of n)s.set(a.status,a.value);return s}const Qs=t.forwardRef(function(s,a){return e.jsx(qe,{direction:"up",ref:a,...s})});function Zs(){var B,W;const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState("Completed"),[d,r]=t.useState(!1),[x,g]=t.useState([]);t.useState();const[j,w]=t.useState();Ks();const[N,E]=t.useState(!1),[_,k]=t.useState(new Map);t.useState(""),t.useState(""),t.useState("");const T=(B=s==null?void 0:s.user)==null?void 0:B.name,V=()=>{r(!1)},z=(L,M)=>{M!=="clickaway"&&E(!1)},I=t.useCallback(L=>()=>{r(!0),w(L)},[]);t.useEffect(()=>{var L;fetch(`${n}/users/${(L=s==null?void 0:s.user)==null?void 0:L.entity_name}/title/technician`,{method:"GET"}).then(M=>M.status===200?M.json():null).then(M=>{if(M!==null){g(M);const J=new Map;M.forEach(A=>J.set(A.fullName,A.id)),k(J)}}),console.log(_)},[(W=s==null?void 0:s.user)==null?void 0:W.entity_name]),t.useEffect(()=>{fetch(`${n}/cases/status/${f}/${_.get(T)}`,{method:"GET"}).then(L=>L.status===200?L.json():null).then(L=>{L!==null&&u(L)})},[_.get(T)]);const D=[{field:"caseNumber",headerName:"Name",width:160,editable:!1},{field:"patient",headerName:"Patient",width:160,editable:!1},{field:"doctor",headerName:"Doctor",width:150,editable:!1},{field:"entity_name",headerName:"Entity Name",width:120,editable:!1},{field:"reg_date",headerName:"Created At",width:160,editable:!1},{field:"caseStatus",headerName:"Progress",renderCell:Ee,renderEditCell:Te,availableAggregationFunctions:["min","max","avg","size"],type:"number",width:100,editable:!1},{field:"status",headerName:"Status",renderCell:$e,renderEditCell:Ne,type:"singleSelect",valueOptions:ge,width:120,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:90,getActions:L=>[e.jsx(fe,{icon:e.jsx(Je,{}),label:"Manage",onClick:I(L.row.id),showInMenu:!0},"manage")]}],G=a;return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"100%"},children:e.jsx(te,{rows:G,columns:D})}),e.jsxs(ke,{fullScreen:!0,open:d,onClose:V,TransitionComponent:Qs,children:[e.jsx(Ke,{sx:{position:"relative"},children:e.jsxs(Qe,{children:[e.jsx(Ze,{edge:"start",color:"inherit",onClick:V,"aria-label":"close",children:e.jsx(Xe,{})}),e.jsx(O,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Close"})," "]})}),e.jsx(Pe,{children:e.jsx(Ae,{children:e.jsx(ot,{caseId:j})})})]}),e.jsx(ve,{open:N,autoHideDuration:1500,onClose:z,children:e.jsx(Ce,{onClose:z,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully!"})})]})}const Xs=t.forwardRef(function(s,a){return e.jsx(qe,{direction:"up",ref:a,...s})});function _t(){var X;const n="https://dentallab-vg4w.onrender.com",{session:s}=H(),[a,u]=t.useState([]);t.useState([]);const[f,h]=t.useState(!1);t.useState([]),t.useState(),t.useState();const[d,r]=t.useState(!1),[x,g]=t.useState(!1);t.useState(new Map);const[j,w]=t.useState(""),[N,E]=t.useState(""),[_,k]=t.useState(""),[T,V]=t.useState(""),[z,I]=t.useState(""),[D,G]=t.useState(""),[B,W]=t.useState(""),[L,M]=t.useState(""),[J,A]=t.useState(""),[q,C]=t.useState("Approve"),b=()=>{g(!1)},p=()=>{r(!1)},l=()=>{h(!1)},c=()=>{fetch(`${n}/invoice/${j}?doctype=${N}&billend=${_}&billdate=${T}&discount=${z}&additionalcost=${D}&ducnumber=${B}&client=${J}`).then(P=>{if(!P.ok)throw new Error(`HTTP error! status: ${P.status}`);return P.blob()}).then(P=>{const Q=window.URL.createObjectURL(P),Z=document.createElement("a");Z.href=Q,Z.setAttribute("download",B),document.body.appendChild(Z),Z.click(),Z.parentNode&&Z.parentNode.removeChild(Z),window.URL.revokeObjectURL(Q)}).catch(P=>{console.error("Download error:",P)})};t.useEffect(()=>{var P;fetch(`${n}/bills/by-entityname?entityname=${(P=s==null?void 0:s.user)==null?void 0:P.entity_name}`,{method:"GET"}).then(Q=>Q.status===200?Q.json():null).then(Q=>{Q!==null&&u(Q)})},[(X=s==null?void 0:s.user)==null?void 0:X.entity_name]);const v=t.useCallback((P,Q,Z,oe,ie,le,ue,he,ce)=>async()=>{Q=="invoice"&&(A(ce),M(P),V(Z),k(oe),E(Q),I(ie),w(he),G(le),W(ue),h(!0)),A(ce),V(Z),k(oe),E(Q),I(ie),w(he),G(le),W(ue),h(!0)},[]),K=async()=>{var Se,Ie;const P=await fetch(`${n}/bills/count-by-entityname?entityname=${(Se=s==null?void 0:s.user)==null?void 0:Se.entity_name}`,{method:"GET"});if(!P.ok){console.error("Error fetching invoice count:",await P.json());return}const Z=await P.json(),oe=(Ie=s==null?void 0:s.user)==null?void 0:Ie.entity_name,ie=je(oe),le=new Date().getFullYear(),ue=me(le),ce=(new Date().getMonth()+1).toString().padStart(2,"0"),m=Z.toString().padStart(4,"0"),ee=`${ie}/RCPT/${ue}${ce}-${m}`,be=await fetch(`${n}/bills/invoicecount/${L}?invoiceCount=${Z}&doctype=receipt&docnumber=${ee}`,{method:"PUT"});if(!be.ok){console.error("Error updating invoice count:",await be.json());return}r(!0),C("View ")},ne=[{field:"docnumber",headerName:"Bill Number",width:200,editable:!1},{field:"doctype",headerName:"Bill Type",width:190,editable:!1},{field:"bill_date",headerName:"Created At",width:160,editable:!1},{field:"billend",headerName:"Exipires On",width:170,editable:!1},{field:"actions",type:"actions",headerName:"Actions",width:190,getActions:P=>[e.jsx(fe,{icon:P.row.doctype=="invoice"?e.jsx(ft,{sx:{color:"green"}}):e.jsx(Oe,{sx:{color:"green"}}),label:P.row.doctype=="invoice"?"Approve":"View Receipt",onClick:v(P.row.id,P.row.doctype,P.row.bill_date,P.row.billend,P.row.discount,P.row.additionalcost,P.row.docnumber,P.row.caseId,P.row.client),showInMenu:!0},"approve")]}],de=a;function me(P){return P.toString().slice(-2)}function je(P){return P?P.split(" ").map(oe=>oe.charAt(0).toUpperCase()).join(""):""}return e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[e.jsx("div",{style:{margin:"15px auto",height:"auto",width:"auto"},children:e.jsx(te,{rows:de,columns:ne})}),e.jsxs(ke,{fullScreen:!0,open:f,onClose:l,TransitionComponent:Xs,children:[" ",e.jsx(Ke,{sx:{position:"relative"},children:e.jsxs(Qe,{children:[e.jsx(Ze,{edge:"start",color:"inherit",onClick:l,"aria-label":"close",children:e.jsx(Xe,{})}),e.jsx(O,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Close"}),e.jsx(S,{children:N==="invoice"?e.jsxs("div",{children:[" ",e.jsx(F,{sx:{color:"white"},onClick:K,children:"Approve"}),e.jsx(F,{sx:{color:"white"},onClick:c,children:"Download"})]}):e.jsxs("div",{children:[" ",e.jsx(F,{sx:{color:"white"},onClick:c,children:"Download"})]})})]})}),e.jsx(Pe,{children:e.jsx(Ae,{children:e.jsx(Ut,{caseId:j,docttypee:N,billend:_,bill_date:T,discount:z,additionalcost:D,docnumber:B})})})]}),e.jsx(ve,{open:d,autoHideDuration:1500,onClose:p,children:e.jsx(Ce,{onClose:p,severity:"success",variant:"filled",sx:{width:"100%"},children:"Approve Success"})}),e.jsx(ve,{open:x,autoHideDuration:1500,onClose:b,children:e.jsx(Ce,{onClose:b,severity:"success",variant:"filled",sx:{width:"100%"},children:q})})]})}const ea=Un([{path:"/",element:e.jsx(ss,{}),children:[{path:"/",element:e.jsx(as,{}),children:[{path:"/",element:e.jsx(qn,{})},{path:"/orders",element:e.jsx(Kn,{})},{path:"/page1",element:e.jsx(Zn,{})},{path:"/add-doctor",element:e.jsx(Qn,{})},{path:"/staff/staffregistration",element:e.jsx(os,{})},{path:"/staff/staffview",element:e.jsx(Xn,{})},{path:"/client/view-clients",element:e.jsx(es,{})},{path:"/client/add-client",element:e.jsx(Wn,{})},{path:"/add-task",element:e.jsx(Pt,{})},{path:"/cases/doctor-task",element:e.jsx(Pt,{})},{path:"/cases/create-case",element:e.jsx(Ss,{})},{path:"/cases/view-cases",element:e.jsx(As,{})},{path:"/patients/view-patient",element:e.jsx(is,{})},{path:"/patients/add-patient",element:e.jsx(rs,{})},{path:"/manage/view-product",element:e.jsx(us,{})},{path:"/manage/add-product",element:e.jsx(ds,{})},{path:"/manage/view-prothesis",element:e.jsx(cs,{})},{path:"/manage/add-prothesis",element:e.jsx(ls,{})},{path:"/manage/view-conditions",element:e.jsx(hs,{})},{path:"/manage/add-condition",element:e.jsx(fs,{})},{path:"/manage/add-typecondition",element:e.jsx(ms,{})},{path:"/manage/view-typecondition",element:e.jsx(ps,{})},{path:"/manage/add-sinstruction",element:e.jsx(xs,{})},{path:"/manage/view-sinstruction",element:e.jsx(gs,{})},{path:"/case/view-pending",element:e.jsx(_s,{})},{path:"/case/view-onhold",element:e.jsx(Ds,{})},{path:"/case/view-inproduction",element:e.jsx(Ms,{})},{path:"/case/view-completed",element:e.jsx(Os,{})},{path:"/manage/add-enclosed",element:e.jsx(js,{})},{path:"/manage/view-enclosed",element:e.jsx(bs,{})},{path:"/tech/tview-cases",element:e.jsx(zs,{})},{path:"/tech/tview-started",element:e.jsx(Bs,{})},{path:"/tech/tview-halfway",element:e.jsx(Gs,{})},{path:"/tech/tview-finalizing",element:e.jsx(Js,{})},{path:"/tech/tview-completed",element:e.jsx(Zs,{})},{path:"/bills/view-bills",element:e.jsx(_t,{})},{path:"/bills/view-invoices",element:e.jsx(_t,{})}]},{path:"/sign-in",element:e.jsx(ts,{})},{path:"/entity-registration",element:e.jsx(Jn,{})},{path:"/demo",element:e.jsx(Ut,{})}]}]);Yn(document.getElementById("root")).render(e.jsxs(t.StrictMode,{children:[e.jsx(Gn,{router:ea})," "]}));
