import{r as n,w as x,j as r,p as S,S as o,aN as y}from"../vendor-DFbu7K4o.js";import{C as w}from"./Content-BrNjm5q8.js";import{A as j}from"../page-shared-theme/AppTheme-BBEbcC3i.js";import{u as E}from"../page-add-client-DcQ-bK7v.js";function A(u){const l="https://dentallab-vg4w.onrender.com";console.log("SignInSide component rendered"),n.useState(!1),n.useState("");const[k,g]=n.useState(!1);n.useState(!1),n.useState(""),n.useState(!1);const[I,c]=n.useState(""),[N,p]=n.useState(null),d=async s=>(g(!0),new Promise((i,a)=>{fetch(`${l}/users/${s.get("email")}`,{method:"GET"}).then(async e=>(e.ok||fetch(`${l}/clients/-/${s.get("email")}`,{method:"GET"}).then(async t=>{if(!t.ok){const m=await t.json();throw p(m.message),new Error(m.message)}return t.json()}).then(t=>{t&&t.fullName&&(c(t.fullName),s.get("password")===t.password&&i({user:{name:t.fullName,email:s.get("email")||"",image:"https://clinic.mamed.co.tz/assets/images/logo_32_dark.png",title:t.title,entity_name:t.entity_name}}),a(new Error("Incorrect credentials.")))}).catch(t=>{console.error("Error fetching user data:",t),a(t)}).finally(()=>{}),e.json())).then(e=>{e&&e.fullName&&(c(e.fullName),s.get("password")===e.password&&i({user:{name:e.fullName,email:s.get("email")||"",image:"https://clinic.mamed.co.tz/assets/images/logo_32_dark.png",title:e.title,entity_name:e.entity_name}}),a(new Error("Incorrect credentials.")))}).catch(e=>{console.error("Error fetching user data:",e),a(e)}).finally(()=>{})})),{setSession:h}=E(),f=x();return r.jsxs(j,{...u,children:[r.jsx(S,{enableColorScheme:!0}),r.jsx(o,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(40px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},s=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...s.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:r.jsx(o,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:r.jsxs(o,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto"},spacing:2,children:[r.jsx(y,{providers:[{id:"credentials",name:"Credentials"}],signIn:async(s,i,a)=>{try{const e=await d(i);if(e)return h(e),f(a||"/demo",{replace:!0}),{}}catch(e){return{error:e instanceof Error?e.message:"An error occurred"}}return{}}}),r.jsx(w,{path:"/entity-registration",pathtype:"Register"})]})})})]})}export{A as S};
